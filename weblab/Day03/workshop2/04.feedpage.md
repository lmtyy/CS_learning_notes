## Feed Pageï¼ˆä¿¡æ¯æµé¡µé¢ï¼‰

**Feed Page** æ˜¯ä¸€ç§å¸¸è§çš„å†…å®¹å±•ç¤ºé¡µé¢ï¼Œä»¥**æŒç»­æ›´æ–°çš„å‚ç›´æ»šåŠ¨åˆ—è¡¨**å½¢å¼å±•ç¤ºåŠ¨æ€å†…å®¹ã€‚

## ğŸ“± **å…¸å‹ç‰¹å¾**
```jsx
// ç±»ä¼¼è¿™æ ·çš„å¸ƒå±€
<FeedPage>
  <PostCard />  // å¸–å­1
  <PostCard />  // å¸–å­2
  <AdCard />    // å¹¿å‘Šï¼ˆç©¿æ’å†…å®¹ï¼‰
  <PostCard />  // å¸–å­3
  <PostCard />  // å¸–å­4
  // ... æ— é™æ»šåŠ¨åŠ è½½æ›´å¤š
</FeedPage>
```

## ğŸŒŸ **æ ¸å¿ƒç‰¹æ€§**

### 1. **å†…å®¹ç±»å‹å¤šæ ·**
```javascript
const feedItems = [
  { type: 'post', content: 'ç”¨æˆ·å‘å¸ƒçš„å›¾æ–‡' },
  { type: 'video', content: 'çŸ­è§†é¢‘å†…å®¹' },
  { type: 'ad', content: 'å¹¿å‘Šæ¨å¹¿' },
  { type: 'story', content: '24å°æ—¶å¿«æ‹' },
  { type: 'live', content: 'ç›´æ’­é¢„å‘Š' }
];
```

### 2. **äº¤äº’æ¨¡å¼**
- **æ— é™æ»šåŠ¨**ï¼šæ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½
- **å®æ—¶æ›´æ–°**ï¼šæ–°å†…å®¹è‡ªåŠ¨æ’å…¥é¡¶éƒ¨
- **ä¸ªæ€§åŒ–æ’åº**ï¼šåŸºäºç®—æ³•æ¨è
- **äº¤äº’æ“ä½œ**ï¼šç‚¹èµã€è¯„è®ºã€åˆ†äº«ã€æ”¶è—

## ğŸ”„ **æŠ€æœ¯å®ç°è¦ç‚¹**

### 1. **æ— é™æ»šåŠ¨å®ç°**
```jsx
import { useEffect, useRef, useState } from 'react';

function FeedPage() {
  const [items, setItems] = useState([]);
  const [page, setPage] = useState(1);
  const loaderRef = useRef(null);
  
  // è§‚å¯Ÿåº•éƒ¨å…ƒç´ å®ç°æ— é™æ»šåŠ¨
  useEffect(() => {
    const observer = new IntersectionObserver((entries) => {
      if (entries[0].isIntersecting) {
        loadMore();
      }
    });
    
    if (loaderRef.current) {
      observer.observe(loaderRef.current);
    }
    
    return () => observer.disconnect();
  }, []);
  
  const loadMore = async () => {
    const newItems = await fetchItems(page);
    setItems(prev => [...prev, ...newItems]);
    setPage(page + 1);
  };
  
  return (
    <div className="feed-container">
      {items.map(item => (
        <FeedItem key={item.id} item={item} />
      ))}
      <div ref={loaderRef} className="loader">
        {isLoading ? 'åŠ è½½ä¸­...' : 'æ»šåŠ¨åŠ è½½æ›´å¤š'}
      </div>
    </div>
  );
}
```

### 2. **æ€§èƒ½ä¼˜åŒ–**
```jsx
// è™šæ‹Ÿåˆ—è¡¨ï¼ˆVirtual Listï¼‰å‡å°‘DOMèŠ‚ç‚¹
import { FixedSizeList } from 'react-window';

function VirtualizedFeed({ items }) {
  return (
    <FixedSizeList
      height={window.innerHeight}
      itemCount={items.length}
      itemSize={120}
      width="100%"
    >
      {({ index, style }) => (
        <div style={style}>
          <FeedItem item={items[index]} />
        </div>
      )}
    </FixedSizeList>
  );
}
```

## ğŸ“Š **å¸¸è§Feedç±»å‹**

| ç±»å‹ | ç¤ºä¾‹ | ç‰¹ç‚¹ |
|------|------|------|
| **ç¤¾äº¤Feed** | Facebookã€Twitterã€å¾®åš | å…³æ³¨å…³ç³»ã€æ—¶é—´çº¿ã€äº’åŠ¨å¤š |
| **å†…å®¹Feed** | Instagramã€TikTok | å¤šåª’ä½“ä¸ºä¸»ã€ç®—æ³•æ¨è |
| **æ–°é—»Feed** | ä»Šæ—¥å¤´æ¡ã€Flipboard | æ–‡ç« èšåˆã€åˆ†ç±»æ˜ç¡® |
| **è´­ç‰©Feed** | æ·˜å®æ¨èã€äºšé©¬é€Š | å•†å“å±•ç¤ºã€ä¸ªæ€§åŒ–æ¨è |
| **å·¥ä½œFeed** | LinkedInã€Notion | èŒä¸šå†…å®¹ã€ä¸“ä¸šæ€§å¼º |

## ğŸ¯ **å…³é”®è®¾è®¡è€ƒè™‘**

### 1. **æ’åºç®—æ³•**
```javascript
// ä¸ªæ€§åŒ–æ¨èç®—æ³•
function sortFeedItems(items, userPreferences) {
  return items.sort((a, b) => {
    const scoreA = calculateScore(a, userPreferences);
    const scoreB = calculateScore(b, userPreferences);
    return scoreB - scoreA; // é™åºæ’åˆ—
  });
}

function calculateScore(item, user) {
  let score = 0;
  score += item.relevance * 0.4;    // ç›¸å…³æ€§
  score += item.recency * 0.3;      // æ—¶æ•ˆæ€§
  score += item.popularity * 0.2;   // çƒ­åº¦
  score += user.interest * 0.1;     // ç”¨æˆ·å…´è¶£
  return score;
}
```

### 2. **çŠ¶æ€ç®¡ç†**
```jsx
// ä½¿ç”¨ Context æˆ–çŠ¶æ€ç®¡ç†åº“
const FeedContext = createContext();

function FeedProvider({ children }) {
  const [feedState, dispatch] = useReducer(feedReducer, {
    items: [],
    hasMore: true,
    isLoading: false,
    error: null,
    lastUpdated: null
  });
  
  return (
    <FeedContext.Provider value={{ feedState, dispatch }}>
      {children}
    </FeedContext.Provider>
  );
}
```

### 3. **ç¼“å­˜ç­–ç•¥**
```javascript
// ä½¿ç”¨ SWR æˆ– React Query ç®¡ç†æ•°æ®
import useSWRInfinite from 'swr/infinite';

function useInfiniteFeed() {
  const { data, size, setSize, isLoading, isValidating } = useSWRInfinite(
    (pageIndex) => `/api/feed?page=${pageIndex}`,
    fetcher,
    {
      revalidateOnFocus: false, // ä¼˜åŒ–æ€§èƒ½
      revalidateFirstPage: false,
      initialSize: 2 // åˆå§‹åŠ è½½é¡µæ•°
    }
  );
  
  return {
    items: data ? data.flat() : [],
    loadMore: () => setSize(size + 1),
    isLoading,
    hasMore: !data || data[data.length - 1].length > 0
  };
}
```

## ğŸš€ **ç°ä»£Feedä¼˜åŒ–æŠ€æœ¯**

1. **æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰**ï¼šé¦–å±å¿«é€ŸåŠ è½½
2. **æµå¼æ¸²æŸ“**ï¼šæ¸è¿›å¼å†…å®¹å±•ç¤º
3. **å›¾ç‰‡æ‡’åŠ è½½**ï¼šä¼˜åŒ–æ€§èƒ½
4. **é¢„åŠ è½½**ï¼šæå‰åŠ è½½ä¸‹ä¸€å±å†…å®¹
5. **ç¦»çº¿æ”¯æŒ**ï¼šPWA ç¼“å­˜å†…å®¹

## ğŸ“± **ç§»åŠ¨ç«¯ç‰¹åˆ«è€ƒè™‘**
```css
/* ç§»åŠ¨ç«¯ä¼˜åŒ–æ ·å¼ */
.feed-container {
  -webkit-overflow-scrolling: touch; /* å¹³æ»‘æ»šåŠ¨ */
  overscroll-behavior: contain;      /* é˜²æ­¢æ»šåŠ¨é“¾ */
}

.feed-item {
  touch-action: manipulation;        /* ä¼˜åŒ–è§¦æ‘¸å“åº” */
}
```

**Feed Page** æ˜¯ç°ä»£Webåº”ç”¨çš„æ ¸å¿ƒé¡µé¢ç±»å‹ï¼Œè®¾è®¡æ—¶éœ€è¦å¹³è¡¡**æ€§èƒ½**ã€**ç”¨æˆ·ä½“éªŒ**å’Œ**å•†ä¸šç›®æ ‡**ï¼ˆå¹¿å‘Šå˜ç°ã€ç”¨æˆ·ç•™å­˜ç­‰ï¼‰ã€‚