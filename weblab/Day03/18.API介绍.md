# ğŸ“¡ API å…¥é—¨æŒ‡å—ï¼šWebå¼€å‘çš„â€œæ’åº§â€

æƒ³è±¡ä¸€ä¸‹ï¼šä½ çš„æ‰‹æœºå……ç”µéœ€è¦**å……ç”µå™¨å’Œæ’åº§**ã€‚API å°±åƒ**æ’åº§**ï¼Œè€Œä½ çš„åº”ç”¨å°±æ˜¯**å……ç”µå™¨**ã€‚

## ğŸŒŸ ä¸€å¥è¯ç†è§£ API

**API = Application Programming Interface**
ï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰

ç®€å•è¯´ï¼š**API æ˜¯ä¸€ç§è®©ä¸åŒè½¯ä»¶äº’ç›¸äº¤æµçš„æ ‡å‡†æ–¹å¼**ã€‚

## ğŸ”Œ ç”Ÿæ´»ä¸­çš„ API ç±»æ¯”

| åœºæ™¯ | ç±»æ¯” | è¯´æ˜ |
|------|------|------|
| **é¤å…ç‚¹é¤** | èœå•å°±æ˜¯ API | ä½ ï¼ˆå®¢æˆ·ç«¯ï¼‰é€šè¿‡èœå•ï¼ˆAPIï¼‰å‘Šè¯‰å¨æˆ¿ï¼ˆæœåŠ¡å™¨ï¼‰è¦ä»€ä¹ˆï¼Œå¨æˆ¿åšå¥½åé€šè¿‡æœåŠ¡å‘˜é€å›æ¥ |
| **ç”µæºæ’åº§** | æ’åº§æ ‡å‡†å°±æ˜¯ API | æ‰€æœ‰ç¬¦åˆæ ‡å‡†çš„æ’å¤´éƒ½èƒ½ç”¨ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆç”µå™¨ |
| **å¿«é€’æœåŠ¡** | å¿«é€’å•å°±æ˜¯ API | ä½ æŒ‰æ ¼å¼å¡«å†™ï¼Œå¿«é€’å…¬å¸æŒ‰æ ¼å¼å¤„ç†ï¼ŒåŒ…è£¹å°±èƒ½é€è¾¾ |

## ğŸ’» æŠ€æœ¯ä¸­çš„ API

### **Web APIï¼ˆæˆ‘ä»¬æœ€å¸¸è¯´çš„ï¼‰**
```javascript
// æ¯”å¦‚è°ƒç”¨å¤©æ°” API
https://api.weather.com/v3/current?city=åŒ—äº¬

// è¿”å›çš„æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰ï¼š
{
  "temperature": 25,
  "weather": "æ™´æœ—",
  "humidity": "60%"
}
```

### **å¸¸è§çš„ API ç±»å‹**
1. **å¼€æ”¾ API**ï¼ˆå¤©æ°”ã€åœ°å›¾ã€æ”¯ä»˜ï¼‰
2. **å†…éƒ¨ API**ï¼ˆå…¬å¸å†…éƒ¨ç³»ç»Ÿé—´è°ƒç”¨ï¼‰
3. **ç¬¬ä¸‰æ–¹ API**ï¼ˆå¾®ä¿¡ç™»å½•ã€æ”¯ä»˜å®æ”¯ä»˜ï¼‰

## ğŸ› ï¸ API çš„å››ä¸ªæ ¸å¿ƒè¦ç´ 

### **1. ç«¯ç‚¹ï¼ˆEndpointï¼‰**
```bash
# å°±åƒä¸åŒçš„åŠŸèƒ½æŒ‰é’®
https://api.example.com/users      # è·å–ç”¨æˆ·åˆ—è¡¨
https://api.example.com/users/123  # è·å–IDä¸º123çš„ç”¨æˆ·
https://api.example.com/products   # è·å–å•†å“åˆ—è¡¨
```

### **2. æ–¹æ³•ï¼ˆHTTP Methodï¼‰**
```javascript
GET    /users      # è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆæŸ¥çœ‹ï¼‰
POST   /users      # åˆ›å»ºæ–°ç”¨æˆ·ï¼ˆæ–°å¢ï¼‰
PUT    /users/123  # æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆä¿®æ”¹ï¼‰
DELETE /users/123  # åˆ é™¤ç”¨æˆ·ï¼ˆåˆ é™¤ï¼‰
```

### **3. è¯·æ±‚å‚æ•°**
```javascript
// 1. æŸ¥è¯¢å‚æ•°ï¼ˆGETè¯·æ±‚ç”¨ï¼‰
GET /users?page=2&limit=10&sort=name

// 2. è·¯å¾„å‚æ•°
GET /users/123          # è·å–ID=123çš„ç”¨æˆ·
GET /products/456/reviews  # è·å–å•†å“456çš„è¯„è®º

// 3. è¯·æ±‚ä½“ï¼ˆPOST/PUTç”¨ï¼‰
POST /users
{
  "name": "å¼ ä¸‰",
  "email": "zhangsan@example.com"
}
```

### **4. å“åº”æ ¼å¼**
```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {"id": 1, "name": "å¼ ä¸‰"},
    {"id": 2, "name": "æå››"}
  ],
  "code": 200
}
```

## ğŸ¯ API å®é™…åº”ç”¨ç¤ºä¾‹

### **ç¤ºä¾‹1ï¼šè·å–å¤©æ°”**
```javascript
// è°ƒç”¨å¤©æ°”API
fetch('https://api.weather.com/v1/current?city=åŒ—äº¬')
  .then(response => response.json())
  .then(data => {
    console.log(`åŒ—äº¬å¤©æ°”ï¼š${data.weather}`);
    console.log(`æ¸©åº¦ï¼š${data.temperature}â„ƒ`);
  });
```

### **ç¤ºä¾‹2ï¼šç”¨æˆ·ç™»å½•**
```javascript
// 1. ç”¨æˆ·å¡«å†™è¡¨å•
const userData = {
  username: 'zhangsan',
  password: '123456'
};

// 2. è°ƒç”¨ç™»å½•API
fetch('https://api.example.com/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(userData)
})
.then(response => response.json())
.then(result => {
  if (result.success) {
    localStorage.setItem('token', result.token); // ä¿å­˜token
    alert('ç™»å½•æˆåŠŸï¼');
  } else {
    alert('ç™»å½•å¤±è´¥ï¼š' + result.message);
  }
});
```

### **ç¤ºä¾‹3ï¼šè·å–å•†å“åˆ—è¡¨ï¼ˆå¸¦åˆ†é¡µï¼‰**
```javascript
// è·å–ç¬¬2é¡µï¼Œæ¯é¡µ10æ¡å•†å“
fetch('https://api.example.com/products?page=2&limit=10')
  .then(response => response.json())
  .then(data => {
    // æ˜¾ç¤ºå•†å“åˆ—è¡¨
    data.products.forEach(product => {
      console.log(`${product.name} - ï¿¥${product.price}`);
    });
  });
```

## ğŸ“š API æ–‡æ¡£ç¤ºä¾‹

å¥½çš„ API éƒ½æœ‰è¯¦ç»†çš„æ–‡æ¡£ï¼š

```
## ç”¨æˆ· API æ–‡æ¡£

### 1. è·å–ç”¨æˆ·åˆ—è¡¨
- **URL**: GET /api/users
- **å‚æ•°**: 
  - page (å¯é€‰): é¡µç ï¼Œé»˜è®¤1
  - limit (å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20
- **å“åº”**: 
  ```json
  {
    "success": true,
    "data": [
      {"id": 1, "name": "å¼ ä¸‰", "email": "zhang@example.com"}
    ],
    "total": 100
  }
  ```

### 2. åˆ›å»ºæ–°ç”¨æˆ·
- **URL**: POST /api/users
- **è¯·æ±‚ä½“**:
  ```json
  {
    "name": "string, å¿…éœ€",
    "email": "string, å¿…éœ€",
    "age": "number, å¯é€‰"
  }
  ```
```

## ğŸš€ åˆå­¦è€…å¦‚ä½•å¼€å§‹ä½¿ç”¨ API

### **ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨å…¬å¼€å…è´¹çš„ API ç»ƒä¹ **
```javascript
// æ¨èå‡ ä¸ªå…è´¹çš„ç»ƒä¹ APIï¼š
// 1. JSONPlaceholderï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
fetch('https://jsonplaceholder.typicode.com/posts')
  .then(r => r.json())
  .then(posts => console.log(posts));

// 2. éšæœºç”¨æˆ·æ•°æ®
fetch('https://randomuser.me/api/')
  .then(r => r.json())
  .then(data => console.log(data.results[0]));

// 3. ç‹—ç‹—å›¾ç‰‡
fetch('https://dog.ceo/api/breeds/image/random')
  .then(r => r.json())
  .then(data => {
    document.getElementById('dogImage').src = data.message;
  });
```

### **ç¬¬äºŒæ­¥ï¼šåœ¨é¡¹ç›®ä¸­å®é™…åº”ç”¨**
åˆ›å»ºä¸€ä¸ªç®€å•çš„å¤©æ°”åº”ç”¨ï¼š
```html
<!DOCTYPE html>
<html>
<body>
  <input id="cityInput" placeholder="è¾“å…¥åŸå¸‚">
  <button onclick="getWeather()">æŸ¥è¯¢å¤©æ°”</button>
  <div id="weatherResult"></div>

  <script>
  async function getWeather() {
    const city = document.getElementById('cityInput').value;
    
    try {
      // è°ƒç”¨å¤©æ°”APIï¼ˆè¿™é‡Œç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
      const response = await fetch(`/api/weather?city=${city}`);
      const data = await response.json();
      
      document.getElementById('weatherResult').innerHTML = `
        <h3>${city}å¤©æ°”</h3>
        <p>æ¸©åº¦ï¼š${data.temperature}â„ƒ</p>
        <p>å¤©æ°”ï¼š${data.weather}</p>
      `;
    } catch (error) {
      alert('è·å–å¤©æ°”å¤±è´¥');
    }
  }
  </script>
</body>
</html>
```

### **ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹çœŸå®API**
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼š
1. è¿›å…¥ **Network** æ ‡ç­¾
2. è®¿é—®ä»»æ„ç½‘ç«™ï¼ˆå¦‚æ·˜å®ã€å¾®åšï¼‰
3. æŸ¥çœ‹ **XHR/Fetch** è¯·æ±‚
4. ç‚¹å‡»æŸä¸ªè¯·æ±‚ï¼ŒæŸ¥çœ‹ï¼š
   - **Headers**: APIåœ°å€ã€è¯·æ±‚æ–¹æ³•
   - **Preview**: è¿”å›çš„æ•°æ®
   - **Response**: åŸå§‹å“åº”

## ğŸ’¡ é‡è¦æ¦‚å¿µæ€»ç»“

| æ¦‚å¿µ | æ¯”å–» | è§£é‡Š |
|------|------|------|
| **APIç«¯ç‚¹** | ä¸åŒçš„æœåŠ¡çª—å£ | æ¯ä¸ªURLå¯¹åº”ä¸€ä¸ªåŠŸèƒ½ |
| **HTTPæ–¹æ³•** | æ“ä½œç±»å‹ | GET(æŸ¥)ã€POST(å¢)ã€PUT(æ”¹)ã€DELETE(åˆ ) |
| **è¯·æ±‚å‚æ•°** | å¡«å†™è¡¨æ ¼ | å‘Šè¯‰APIä½ è¦ä»€ä¹ˆã€æ€ä¹ˆè¦ |
| **å“åº”æ•°æ®** | è¿”å›çš„ç»“æœ | APIå¤„ç†åçš„æ•°æ®ï¼Œé€šå¸¸æ˜¯JSONæ ¼å¼ |
| **çŠ¶æ€ç ** | æ“ä½œç»“æœ | 200æˆåŠŸã€404æ‰¾ä¸åˆ°ã€500æœåŠ¡å™¨é”™è¯¯ |

## ğŸ¯ ç»™åˆå­¦è€…çš„å®è·µå»ºè®®

1. **å…ˆå­¦ä¼šä½¿ç”¨API**ï¼Œå†å­¦å¦‚ä½•åˆ›å»ºAPI
2. **ä»ç®€å•çš„GETè¯·æ±‚å¼€å§‹**ï¼Œæ¯”å¦‚è·å–æ–‡ç« åˆ—è¡¨
3. **ä½¿ç”¨Postmanæˆ–æµè§ˆå™¨**æµ‹è¯•API
4. **å¤šçœ‹å¤šæ¨¡ä»¿**ï¼šæŸ¥çœ‹çƒ­é—¨ç½‘ç«™çš„APIè°ƒç”¨æ–¹å¼

---

**è®°ä½**ï¼šAPIå°±æ˜¯**å‰ç«¯çš„æœåŠ¡å‘˜**ã€‚ä½ ï¼ˆå‰ç«¯ï¼‰å‘Šè¯‰æœåŠ¡å‘˜ï¼ˆAPIï¼‰æƒ³è¦ä»€ä¹ˆï¼ŒæœåŠ¡å‘˜å»å¨æˆ¿ï¼ˆæœåŠ¡å™¨ï¼‰å–æ¥ç»™ä½ ã€‚

æƒ³å®é™…è¯•è¯•å—ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªç«‹å³å¯ä»¥è¿è¡Œçš„ä¾‹å­ï¼š
```javascript
// å¤åˆ¶è¿™æ®µä»£ç åˆ°æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
fetch('https://jsonplaceholder.typicode.com/posts/1')
  .then(r => r.json())
  .then(data => console.log('è·å–çš„æ–‡ç« æ ‡é¢˜ï¼š', data.title));
```

ä½ å·²ç»æˆåŠŸè°ƒç”¨äº†ä¸€ä¸ªçœŸå®çš„APIï¼ğŸ‰

æƒ³æ·±å…¥äº†è§£å“ªç§APIï¼Ÿè¿˜æ˜¯æƒ³å­¦ä¹ å¦‚ä½•åˆ›å»ºè‡ªå·±çš„APIï¼Ÿ