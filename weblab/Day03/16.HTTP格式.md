# ğŸ—ï¸ HTTPç»“æ„è¯¦è§£ï¼šæ·±å…¥ç†è§£Webé€šä¿¡çš„æ¯ä¸€å±‚

HTTPæ¶ˆæ¯å°±åƒç²¾å¿ƒåŒ…è£…çš„â€œå¿«é€’åŒ…è£¹â€ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰ç‰¹å®šä½œç”¨ã€‚è®©æˆ‘ä»¬æ‹†è§£è¿™ä¸ªåŒ…è£¹ï¼Œçœ‹çœ‹é‡Œé¢åˆ°åº•æœ‰ä»€ä¹ˆã€‚

## ğŸ“¦ HTTPæ¶ˆæ¯æ•´ä½“ç»“æ„

```
HTTPæ¶ˆæ¯ = èµ·å§‹è¡Œ + å¤´éƒ¨(Headers) + ç©ºè¡Œ + æ¶ˆæ¯ä½“(Body)
         â†‘           â†‘              â†‘         â†‘
       å¿…é€‰        å¯é€‰ä½†å¸¸è§      å¿…é€‰      å¯é€‰
```

## ä¸€ã€ğŸš€ èµ·å§‹è¡Œï¼ˆStart Lineï¼‰

èµ·å§‹è¡Œæ˜¯HTTPæ¶ˆæ¯çš„ç¬¬ä¸€è¡Œï¼Œå†³å®šäº†æ¶ˆæ¯çš„åŸºæœ¬å±æ€§ã€‚

### **A. è¯·æ±‚èµ·å§‹è¡Œï¼ˆRequest Lineï¼‰**
```
GET /api/users?page=1 HTTP/1.1
â”‚     â”‚                   â”‚
â”‚     â”‚                   â””â”€â”€ åè®®ç‰ˆæœ¬
â”‚     â””â”€â”€ è¯·æ±‚ç›®æ ‡
â””â”€â”€ è¯·æ±‚æ–¹æ³•
```

**ä¸‰ä¸ªéƒ¨åˆ†ç”¨ç©ºæ ¼åˆ†éš”ï¼Œæ ¼å¼ä¸¥æ ¼ï¼š**
```http
æ–¹æ³• SP è¯·æ±‚ç›®æ ‡ SP HTTPç‰ˆæœ¬ CRLF
```

**1. æ–¹æ³•ï¼ˆMethodï¼‰- å®šä¹‰æ“ä½œç±»å‹**
```http
GET     /products        # è·å–äº§å“åˆ—è¡¨
POST    /products        # åˆ›å»ºæ–°äº§å“
PUT     /products/123    # å®Œå…¨æ›´æ–°äº§å“123
PATCH   /products/123    # éƒ¨åˆ†æ›´æ–°äº§å“123
DELETE  /products/123    # åˆ é™¤äº§å“123
OPTIONS /products        # è·å–æ”¯æŒçš„é€šä¿¡é€‰é¡¹
HEAD    /products        # åªè·å–å“åº”å¤´
TRACE   /products        # è¯Šæ–­ï¼Œå›æ˜¾è¯·æ±‚
CONNECT /proxy           # å»ºç«‹éš§é“ï¼ˆç”¨äºä»£ç†ï¼‰
```

**2. è¯·æ±‚ç›®æ ‡ï¼ˆRequest Targetï¼‰- å¤šç§å½¢å¼**
- **åŸå§‹å½¢å¼ï¼ˆOrigin Formï¼‰**ï¼š`/api/users?page=1`ï¼ˆæœ€å¸¸è§ï¼‰
- **ç»å¯¹å½¢å¼ï¼ˆAbsolute Formï¼‰**ï¼š`http://example.com/api/users`ï¼ˆä»£ç†æ—¶ä½¿ç”¨ï¼‰
- **æˆæƒå½¢å¼ï¼ˆAuthority Formï¼‰**ï¼š`example.com:443`ï¼ˆCONNECTæ–¹æ³•ä¸“ç”¨ï¼‰
- **æ˜Ÿå·å½¢å¼ï¼ˆAsterisk Formï¼‰**ï¼š`*`ï¼ˆOPTIONSæ–¹æ³•æŸ¥è¯¢æœåŠ¡å™¨èƒ½åŠ›ï¼‰

**3. åè®®ç‰ˆæœ¬**
```http
HTTP/0.9  # æå…¶ç®€å•ï¼Œå·²åºŸå¼ƒ
HTTP/1.0  # æ·»åŠ å¤´éƒ¨ã€æ–¹æ³•ã€çŠ¶æ€ç 
HTTP/1.1  # å½“å‰ä¸»æµï¼ˆ1997å¹´å‘å¸ƒï¼Œè‡³ä»Šä»å¹¿æ³›ä½¿ç”¨ï¼‰
HTTP/2    # äºŒè¿›åˆ¶ã€å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©
HTTP/3    # åŸºäºQUICï¼ˆUDPï¼‰ï¼Œæ›´å¿«è¿æ¥
```

### **B. å“åº”èµ·å§‹è¡Œï¼ˆStatus Lineï¼‰**
```
HTTP/1.1 200 OK
â”‚          â”‚   â”‚
â”‚          â”‚   â””â”€â”€ åŸå› çŸ­è¯­
â”‚          â””â”€â”€ çŠ¶æ€ç 
â””â”€â”€ åè®®ç‰ˆæœ¬
```

**çŠ¶æ€ç åˆ†ç±»ï¼ˆè®°å¿†å£è¯€ï¼š1xxä¿¡æ¯ï¼Œ2xxæˆåŠŸï¼Œ3xxè·³è½¬ï¼Œ4xxä½ é”™äº†ï¼Œ5xxæˆ‘é”™äº†ï¼‰**

| èŒƒå›´ | ç±»åˆ« | å¸¸è§ç¤ºä¾‹ | å«ä¹‰ |
|------|------|----------|------|
| 1xx | **ä¿¡æ¯å“åº”** | 100 Continue | ç»§ç»­å‘é€è¯·æ±‚ä½“ |
| 2xx | **æˆåŠŸå“åº”** | 200 OK<br>201 Created<br>204 No Content | è¯·æ±‚æˆåŠŸ<br>èµ„æºå·²åˆ›å»º<br>æˆåŠŸä½†æ— å†…å®¹ |
| 3xx | **é‡å®šå‘** | 301 Moved Permanently<br>302 Found<br>304 Not Modified | æ°¸ä¹…é‡å®šå‘<br>ä¸´æ—¶é‡å®šå‘<br>ç¼“å­˜æœªä¿®æ”¹ |
| 4xx | **å®¢æˆ·ç«¯é”™è¯¯** | 400 Bad Request<br>401 Unauthorized<br>403 Forbidden<br>404 Not Found<br>429 Too Many Requests | è¯·æ±‚é”™è¯¯<br>æœªè®¤è¯<br>æ— æƒé™<br>èµ„æºä¸å­˜åœ¨<br>è¯·æ±‚è¿‡å¤š |
| 5xx | **æœåŠ¡å™¨é”™è¯¯** | 500 Internal Server Error<br>502 Bad Gateway<br>503 Service Unavailable<br>504 Gateway Timeout | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯<br>ç½‘å…³é”™è¯¯<br>æœåŠ¡ä¸å¯ç”¨<br>ç½‘å…³è¶…æ—¶ |

## äºŒã€ğŸ“‹ å¤´éƒ¨å­—æ®µï¼ˆHeadersï¼‰

å¤´éƒ¨æ˜¯é”®å€¼å¯¹é›†åˆï¼Œæä¾›å…ƒæ•°æ®ä¿¡æ¯ã€‚**å¤§å°å†™ä¸æ•æ„Ÿ**ï¼ˆä½†é€šå¸¸ä½¿ç”¨é¦–å­—æ¯å¤§å†™å½¢å¼ï¼‰ã€‚

### **å¤´éƒ¨ç»“æ„**
```
Header-Name: value1, value2
Header-Name: value
```
**æ³¨æ„**ï¼šå†’å·åå¿…é¡»æœ‰ç©ºæ ¼ï¼

### **å¤´éƒ¨åˆ†ç±»**

#### **é€šç”¨å¤´éƒ¨ï¼ˆè¯·æ±‚å’Œå“åº”éƒ½å¯èƒ½åŒ…å«ï¼‰**
```http
Connection: keep-alive          # ä¿æŒè¿æ¥
Cache-Control: max-age=3600     # ç¼“å­˜æ§åˆ¶
Date: Tue, 15 Nov 2022 08:12:31 GMT  # æ¶ˆæ¯æ—¶é—´
```

#### **è¯·æ±‚å¤´éƒ¨ï¼ˆåªå‡ºç°åœ¨è¯·æ±‚ä¸­ï¼‰**
```http
# èº«ä»½è®¤è¯
Authorization: Bearer eyJhbGciOiJ...

# å®¢æˆ·ç«¯ä¿¡æ¯
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
Accept: text/html,application/json
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
Accept-Encoding: gzip, deflate

# å†…å®¹ç±»å‹
Content-Type: application/json
Content-Length: 128

# Cookieç®¡ç†
Cookie: sessionId=abc123; userId=456

# æ¥æºä¿¡æ¯ï¼ˆç”¨äºCORSï¼‰
Referer: https://www.google.com/
Origin: https://example.com
```

#### **å“åº”å¤´éƒ¨ï¼ˆåªå‡ºç°åœ¨å“åº”ä¸­ï¼‰**
```http
# æœåŠ¡å™¨ä¿¡æ¯
Server: nginx/1.18.0

# å†…å®¹ä¿¡æ¯
Content-Type: application/json; charset=utf-8
Content-Length: 2048
Content-Encoding: gzip

# ç¼“å­˜æ§åˆ¶
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"
Last-Modified: Tue, 15 Nov 2022 08:12:31 GMT

# Cookieè®¾ç½®
Set-Cookie: sessionId=abc123; Path=/; HttpOnly; Max-Age=3600
Set-Cookie: token=xyz789; Secure; SameSite=Strict

# è·¨åŸŸç›¸å…³
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: Content-Type, Authorization

# å®‰å…¨ç›¸å…³
Strict-Transport-Security: max-age=31536000
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
```

#### **å®ä½“å¤´éƒ¨ï¼ˆæè¿°æ¶ˆæ¯ä½“å†…å®¹ï¼‰**
```http
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryABC123
Content-Disposition: attachment; filename="report.pdf"
Content-Range: bytes 0-999/5000  # åˆ†å—ä¼ è¾“
```

### **é‡è¦å¤´éƒ¨è¯¦è§£**

**1. Content-Typeï¼šåª’ä½“ç±»å‹**
```http
# å¸¸è§ç±»å‹
text/html; charset=utf-8
application/json
application/xml
application/x-www-form-urlencoded  # è¡¨å•é»˜è®¤æ ¼å¼
multipart/form-data                # æ–‡ä»¶ä¸Šä¼ 
image/png
application/pdf
```

**2. Cache-Controlï¼šç¼“å­˜æ§åˆ¶æŒ‡ä»¤**
```http
# å®¢æˆ·ç«¯æŒ‡ä»¤
Cache-Control: no-cache          # ç¼“å­˜ä½†æ¯æ¬¡éªŒè¯
Cache-Control: no-store          # ä¸ç¼“å­˜
Cache-Control: max-age=3600      # ç¼“å­˜3600ç§’

# æœåŠ¡å™¨æŒ‡ä»¤
Cache-Control: public, max-age=31536000  # å…¬å¼€ç¼“å­˜1å¹´
Cache-Control: private, max-age=3600     # ç§æœ‰ç¼“å­˜1å°æ—¶
Cache-Control: no-cache, must-revalidate # éœ€è¦éªŒè¯
```

**3. Authorizationï¼šè®¤è¯å‡­è¯**
```http
# Basicè®¤è¯ï¼ˆå·²è¿‡æ—¶ï¼Œä¸å®‰å…¨ï¼‰
Authorization: Basic dXNlcjpwYXNzd29yZA==

# Bearer Tokenï¼ˆç°ä»£å¸¸ç”¨ï¼‰
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# API Key
Authorization: ApiKey abc123xyz789
```

## ä¸‰ã€ğŸ“„ æ¶ˆæ¯ä½“ï¼ˆBodyï¼‰

æ¶ˆæ¯ä½“åŒ…å«å®é™…ä¼ è¾“çš„æ•°æ®ã€‚**GETã€HEADã€OPTIONSç­‰æ–¹æ³•é€šå¸¸æ²¡æœ‰æ¶ˆæ¯ä½“**ã€‚

### **ç©ºè¡Œåˆ†éš”**
å¤´éƒ¨å’Œæ¶ˆæ¯ä½“ä¹‹é—´å¿…é¡»æœ‰**ä¸€ä¸ªç©ºè¡Œ**ï¼ˆ`\r\n\r\n`ï¼‰ï¼

```http
POST /api/users HTTP/1.1
Content-Type: application/json
Content-Length: 56
                    â† è¿™é‡Œæœ‰ä¸€ä¸ªç©ºè¡Œï¼ˆä¸å¯è§ä½†å¿…é¡»å­˜åœ¨ï¼‰
{"username": "john", "email": "john@example.com"}
```

### **æ¶ˆæ¯ä½“æ ¼å¼ç¤ºä¾‹**

**1. JSONæ ¼å¼ï¼ˆREST APIå¸¸ç”¨ï¼‰**
```http
POST /api/products HTTP/1.1
Content-Type: application/json
Content-Length: 75

{
  "name": "iPhone 14",
  "price": 999,
  "category": "electronics"
}
```

**2. è¡¨å•ç¼–ç æ ¼å¼**
```http
POST /login HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Content-Length: 33

username=john&password=secret123
```

**3. å¤šéƒ¨åˆ†æ ¼å¼ï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰**
```http
POST /upload HTTP/1.1
Content-Type: multipart/form-data; boundary=----WebKitBoundary123
Content-Length: 345

----WebKitBoundary123
Content-Disposition: form-data; name="username"

john
----WebKitBoundary123
Content-Disposition: form-data; name="avatar"; filename="photo.jpg"
Content-Type: image/jpeg

[binary image data here]
----WebKitBoundary123--
```

**4. çº¯æ–‡æœ¬æ ¼å¼**
```http
POST /message HTTP/1.1
Content-Type: text/plain
Content-Length: 28

è¿™æ˜¯ä¸€æ¡çº¯æ–‡æœ¬æ¶ˆæ¯ã€‚
```

## å››ã€ğŸ” å®Œæ•´ç¤ºä¾‹åˆ†æ

### **å®Œæ•´HTTPè¯·æ±‚ç¤ºä¾‹**
```http
POST /api/v1/users HTTP/1.1
Host: api.example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept: application/json
Accept-Language: zh-CN,zh;q=0.9
Accept-Encoding: gzip, deflate
Content-Type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...
Content-Length: 89
Connection: keep-alive
Referer: https://example.com/signup
Origin: https://example.com
Cache-Control: no-cache

{
  "username": "john_doe",
  "email": "john@example.com",
  "password": "P@ssw0rd123"
}
```

**é€è¡Œè§£æï¼š**
1. `POST /api/v1/users HTTP/1.1` - åˆ›å»ºç”¨æˆ·ï¼ŒAPIè·¯å¾„ï¼ŒHTTP 1.1åè®®
2. `Host: api.example.com` - ç›®æ ‡ä¸»æœºï¼ˆHTTP/1.1å¿…é¡»ï¼‰
3. `User-Agent` - å®¢æˆ·ç«¯æ ‡è¯†
4. `Accept` - æœŸæœ›JSONå“åº”
5. `Accept-Language` - ä¸­æ–‡ä¼˜å…ˆ
6. `Accept-Encoding` - æ”¯æŒå‹ç¼©
7. `Content-Type` - è¯·æ±‚ä½“ä¸ºJSON
8. `Authorization` - Bearer Tokenè®¤è¯
9. `Content-Length` - è¯·æ±‚ä½“89å­—èŠ‚
10. `Connection: keep-alive` - ä¿æŒè¿æ¥
11. `Referer` - æ¥æºé¡µé¢
12. `Origin` - è¯·æ±‚æ¥æºï¼ˆCORSç”¨ï¼‰
13. `Cache-Control` - ä¸è¦ç¼“å­˜
14. ç©ºè¡Œ - å¤´éƒ¨ç»“æŸ
15. JSONæ•°æ® - å®é™…ç”¨æˆ·æ•°æ®

### **å®Œæ•´HTTPå“åº”ç¤ºä¾‹**
```http
HTTP/1.1 201 Created
Server: nginx/1.18.0
Date: Mon, 23 Aug 2023 14:30:00 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 156
Connection: keep-alive
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
Access-Control-Allow-Origin: https://example.com
ETag: W/"5c3e-184a5b3a5c0"
Cache-Control: max-age=0, private, must-revalidate
Set-Cookie: session=abc123; Path=/; HttpOnly; Secure; SameSite=Strict

{
  "success": true,
  "data": {
    "id": 456,
    "username": "john_doe",
    "email": "john@example.com",
    "created_at": "2023-08-23T14:30:00Z"
  },
  "message": "User created successfully"
}
```

**é€è¡Œè§£æï¼š**
1. `HTTP/1.1 201 Created` - åè®®ç‰ˆæœ¬ï¼Œèµ„æºåˆ›å»ºæˆåŠŸ
2. `Server` - æœåŠ¡å™¨è½¯ä»¶
3. `Date` - å“åº”æ—¶é—´
4. `Content-Type` - JSONå“åº”ï¼ŒUTF-8ç¼–ç 
5. `Content-Length` - å“åº”ä½“156å­—èŠ‚
6. `Connection` - ä¿æŒè¿æ¥
7. `X-RateLimit-*` - APIé€Ÿç‡é™åˆ¶ä¿¡æ¯
8. `Access-Control-Allow-Origin` - CORSå…è®¸çš„æ¥æº
9. `ETag` - å®ä½“æ ‡ç­¾ï¼Œç”¨äºç¼“å­˜éªŒè¯
10. `Cache-Control` - ç¼“å­˜æŒ‡ä»¤
11. `Set-Cookie` - è®¾ç½®å®‰å…¨ä¼šè¯Cookie
12. ç©ºè¡Œ - å¤´éƒ¨ç»“æŸ
13. JSONå“åº”ä½“ - ä¸šåŠ¡æ•°æ®

## äº”ã€ğŸ”§ å®é™…å¼€å‘ä¸­çš„æ³¨æ„äº‹é¡¹

### **å¸¸è§é”™è¯¯**
1. **å¿˜è®°ç©ºè¡Œ**ï¼šå¤´éƒ¨å’Œæ¶ˆæ¯ä½“ä¹‹é—´å¿…é¡»æœ‰ç©ºè¡Œ
2. **Content-Lengthé”™è¯¯**ï¼šä¸å®é™…æ¶ˆæ¯ä½“é•¿åº¦ä¸ä¸€è‡´
3. **å¤´éƒ¨å¤§å°å†™ä¸ä¸€è‡´**ï¼šè™½ç„¶ä¸æ•æ„Ÿä½†ä¿æŒç»Ÿä¸€
4. **å­—ç¬¦ç¼–ç é—®é¢˜**ï¼šæ˜ç¡®æŒ‡å®š`charset=utf-8`

### **è°ƒè¯•å·¥å…·ä½¿ç”¨**
```bash
# 1. æŸ¥çœ‹åŸå§‹HTTPè¯·æ±‚
curl -v https://api.example.com/users

# 2. åªæŸ¥çœ‹å¤´éƒ¨
curl -I https://api.example.com/users

# 3. å‘é€è‡ªå®šä¹‰è¯·æ±‚
curl -X POST \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer token123" \
  -d '{"name":"test"}' \
  https://api.example.com/users

# 4. ä½¿ç”¨telnetæ‰‹åŠ¨å‘é€ï¼ˆå­¦ä¹ ç”¨ï¼‰
telnet example.com 80
GET / HTTP/1.1
Host: example.com
[å›è½¦ä¸¤æ¬¡]
```

### **æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹**
1. F12æ‰“å¼€å¼€å‘è€…å·¥å…·
2. è¿›å…¥Networkï¼ˆç½‘ç»œï¼‰æ ‡ç­¾
3. ç‚¹å‡»ä»»æ„è¯·æ±‚
4. æŸ¥çœ‹Headersé€‰é¡¹å¡ï¼š
   - **Request Headers**ï¼šå‘é€çš„å¤´éƒ¨
   - **Response Headers**ï¼šæ¥æ”¶çš„å¤´éƒ¨
   - **Request Payload**ï¼šè¯·æ±‚ä½“
   - **Preview/Response**ï¼šå“åº”ä½“

## ğŸ¯ ç»“æ„è®°å¿†å£è¯€

```
ä¸€å¯äºŒå¤´ä¸‰ç©ºè¡Œï¼Œå››ä½“å¯é€‰çœ‹æƒ…å½¢ã€‚
èµ·å§‹è¡Œé‡Œä¸‰éƒ¨åˆ†ï¼Œæ–¹æ³•è·¯å¾„ç‰ˆæœ¬å®šã€‚
å¤´éƒ¨å­—æ®µé”®å€¼å¯¹ï¼Œå¤§å°å†™ï¼Œä¸åŒºåˆ†ã€‚
ç©ºè¡Œè™½å°ä¸èƒ½å°‘ï¼Œåˆ†éš”å¤´ä½“ä½œç”¨æ˜ã€‚
æ¶ˆæ¯ä½“é‡Œæ˜¯å¹²è´§ï¼Œæ ¼å¼ç±»å‹å¤´ä¸­å®šã€‚
```

---

ç†è§£HTTPç»“æ„æ˜¯Webå¼€å‘çš„åŸºçŸ³ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å…¶ç‰¹å®šä½œç”¨ï¼Œå°±åƒå»ºç­‘ä¸­çš„ç –å—ï¼Œå…±åŒæ„å»ºèµ·Webé€šä¿¡çš„å¤§å¦ã€‚å»ºè®®ä½ æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œå®é™…è§‚å¯Ÿå‡ ä¸ªç½‘ç«™çš„HTTPè¯·æ±‚ï¼Œå¯¹ç…§è¿™é‡Œçš„è®²è§£ï¼Œç†è§£ä¼šæ›´æ·±åˆ»ã€‚

æƒ³æ·±å…¥äº†è§£æŸä¸ªç‰¹å®šéƒ¨åˆ†ï¼Œæ¯”å¦‚çŠ¶æ€ç ã€å¤´éƒ¨å­—æ®µï¼Œæˆ–è€…å®é™…ç¼–ç ä¸­å¦‚ä½•å¤„ç†HTTPè¯·æ±‚å—ï¼Ÿ