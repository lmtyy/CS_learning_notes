好的，结合触发-渲染-提交流程来讲挂载、更新、卸载的生命周期。

## 完整生命周期流程

### 1. 挂载（Mount） - 组件第一次显示
**流程：** 触发 → 渲染 → 提交

```jsx
function MyComponent() {
  // 挂载阶段开始
  const [data, setData] = useState(null);
  
  console.log('1. 渲染: 执行组件函数');
  
  // 提交阶段后执行
  useEffect(() => {
    console.log('3. 提交后: 组件已挂载到DOM');
    // 这里可以执行初始化操作
    fetchData().then(setData);
    
    return () => {
      console.log('清理: 组件即将卸载');
    };
  }, []); // 空依赖 = 只在挂载时执行
  
  console.log('2. 返回JSX');
  return <div>组件内容</div>;
}
```

**挂载顺序：**
```
1. 渲染: 执行组件函数
2. 返回JSX  
3. 提交后: 组件已挂载到DOM
```

### 2. 更新（Update） - 组件重新渲染
**流程：** 触发 → 渲染 → 提交

```jsx
function Counter() {
  const [count, setCount] = useState(0);
  
  console.log('渲染: 计算新界面, count =', count);
  
  // 每次提交后都执行
  useEffect(() => {
    console.log('提交后: DOM已更新, count =', count);
  }); // 没有依赖数组
  
  // 只在count变化时执行
  useEffect(() => {
    console.log('提交后: count发生了变化', count);
  }, [count]); // 依赖count
  
  return (
    <button onClick={() => setCount(count + 1)}>
      点击: {count}
    </button>
  );
}
```

**点击按钮时的更新顺序：**
```
触发: setCount(count + 1)
渲染: 计算新界面, count = 1
提交后: DOM已更新, count = 1
提交后: count发生了变化 1
```

### 3. 卸载（Unmount） - 组件从页面移除
**流程：** 触发移除 → 执行清理 → 从DOM删除

```jsx
function App() {
  const [show, setShow] = useState(true);
  
  return (
    <div>
      <button onClick={() => setShow(!show)}>
        {show ? '隐藏' : '显示'}
      </button>
      {show && <Timer />}
    </div>
  );
}

function Timer() {
  const [seconds, setSeconds] = useState(0);
  
  useEffect(() => {
    console.log('挂载: 启动定时器');
    const timer = setInterval(() => {
      setSeconds(s => s + 1);
    }, 1000);
    
    // 清理函数 - 在卸载时自动执行
    return () => {
      console.log('卸载: 清除定时器');
      clearInterval(timer);
    };
  }, []);
  
  return <div>计时: {seconds}秒</div>;
}
```

**点击"隐藏"时的卸载顺序：**
```
卸载: 清除定时器
// 然后Timer组件从DOM中移除
```

## 完整的生命周期图示

```
挂载:
触发(首次渲染) → 渲染(执行函数) → 提交(插入DOM) → useEffect(() => {}, [])

更新:
触发(setState) → 渲染(重新执行) → 提交(更新DOM) → useEffect(() => {})

卸载:
触发(移除组件) → 执行清理函数 → 从DOM移除
```

## 关键点总结

1. **挂载**：组件第一次创建和显示
2. **更新**：状态或属性变化时的重新渲染  
3. **卸载**：组件从页面移除时的清理工作

useEffect的清理函数保证了资源不会泄漏，是卸载阶段的核心机制。