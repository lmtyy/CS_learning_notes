# CSS 盒模型详解

盒模型是 CSS 的核心概念，它描述了每个元素在页面中占据空间的方式。

## 盒模型的组成部分

每个元素都被看作一个矩形盒子，由内到外包括：

```
┌─────────────────────────────────────────┐
│                 margin                   │
│  ┌─────────────────────────────────────┐ │
│  │               border                │ │
│  │  ┌───────────────────────────────┐  │ │
│  │  │           padding             │  │ │
│  │  │  ┌─────────────────────────┐  │  │ │
│  │  │  │        content          │  │  │ │
│  │  │  │                         │  │  │ │
│  │  │  │     实际内容区域          │  │  │ │
│  │  │  └─────────────────────────┘  │  │ │
│  │  │                               │  │ │
│  │  └───────────────────────────────┘  │ │
│  │                                     │ │
│  └─────────────────────────────────────┘ │
│                                          │
└──────────────────────────────────────────┘
```

## 1. 标准盒模型 (content-box) - **默认**

**元素总宽度 = width + padding-left + padding-right + border-left + border-right + margin-left + margin-right**

```css
.box {
    width: 200px;
    height: 100px;
    padding: 20px;
    border: 5px solid #333;
    margin: 10px;
    background: #f0f0f0;
}
```

计算过程：
- **内容区域**: 200px × 100px
- **内边距**: 左右各 20px = 40px
- **边框**: 左右各 5px = 10px
- **外边距**: 左右各 10px = 20px
- **元素总宽度**: 200 + 40 + 10 = 250px (不含margin)
- **页面占据宽度**: 250 + 20 = 270px (含margin)

## 2. 怪异盒模型 (border-box)

**元素总宽度 = width (已包含padding和border)**

```css
.box {
    box-sizing: border-box;
    width: 200px;
    height: 100px;
    padding: 20px;
    border: 5px solid #333;
    margin: 10px;
}
```

计算过程：
- **width 200px 已包含**: 
  - 内容宽度: 200 - 40 - 10 = 150px
  - 内边距: 40px
  - 边框: 10px
- **元素总宽度**: 200px
- **页面占据宽度**: 200 + 20 = 220px (含margin)

## 详细分解每个部分

### Content (内容)
```css
.element {
    width: 300px;        /* 内容宽度 */
    height: 200px;       /* 内容高度 */
    min-width: 100px;    /* 最小宽度 */
    max-width: 500px;    /* 最大宽度 */
}
```

### Padding (内边距)
```css
.element {
    padding: 10px;                 /* 上下左右 */
    padding: 10px 20px;            /* 上下 | 左右 */
    padding: 10px 20px 15px;       /* 上 | 左右 | 下 */
    padding: 10px 20px 15px 5px;   /* 上 | 右 | 下 | 左 */
    
    padding-top: 10px;
    padding-right: 20px;
    padding-bottom: 15px;
    padding-left: 5px;
}
```

### Border (边框)
```css
.element {
    border: 2px solid #333;        /* 宽度 | 样式 | 颜色 */
    border-width: 2px;
    border-style: solid;           /* solid, dashed, dotted, double */
    border-color: #333;
    
    /* 单独设置各边 */
    border-top: 1px dashed red;
    border-right: 2px solid blue;
    border-bottom: 3px dotted green;
    border-left: 1px solid #ccc;
    
    border-radius: 10px;           /* 圆角 */
}
```

### Margin (外边距)
```css
.element {
    margin: 10px;                  /* 上下左右 */
    margin: 10px auto;             /* 上下 | 左右居中 */
    margin: 0 auto;                /* 水平居中常用 */
    
    margin-top: 10px;
    margin-bottom: 20px;
}
```

## 重要的盒模型特性

### 1. 外边距合并 (Margin Collapse)
```css
.box1 {
    margin-bottom: 20px;
}
.box2 {
    margin-top: 30px;
}
/* 实际间距是 30px (取较大值)，不是 50px */
```

### 2. 盒模型切换
```css
/* 标准盒模型 - 默认 */
.element {
    box-sizing: content-box;
}

/* 怪异盒模型 - 推荐使用 */
.element {
    box-sizing: border-box;
}

/* 全局设置为 border-box */
* {
    box-sizing: border-box;
}
```

### 3. 实际应用示例
```css
.card {
    box-sizing: border-box;
    width: 300px;
    padding: 20px;
    border: 1px solid #ddd;
    margin: 10px;
    background: white;
}

/* 这样设置后，card 的实际宽度就是 300px，
   不会因为 padding 和 border 而超出 */
```

## 调试技巧

在浏览器开发者工具中，可以看到盒模型的可视化表示：
- 蓝色: Content
- 绿色: Padding
- 棕色: Border
- 橙色: Margin

## 总结

**关键区别：**
- `content-box`: width = 内容宽度
- `border-box`: width = 内容 + padding + border

**现代开发最佳实践：**
```css
* {
    box-sizing: border-box; /* 全局使用 border-box */
}
```

这样更容易控制和预测元素的最终尺寸，避免意外的布局问题。