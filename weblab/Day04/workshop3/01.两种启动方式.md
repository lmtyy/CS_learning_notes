# npm run dev 和 npm start 的区别

简单直接：**这两个命令没有固定区别，完全由项目自己定义**。

---

## 一、根本原理

这两个命令都定义在 `package.json` 文件的 `scripts` 部分：

```json
{
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  }
}
```

**区别只在配置，不在命令本身。**

---

## 二、常见约定

虽然可以随便定义，但社区有约定俗成的习惯：

### `npm start`（生产/启动）
- **用途**：启动生产环境的服务
- **特点**：简单直接启动
- **例子**：
  ```json
  "scripts": {
    "start": "node server.js"
  }
  ```

### `npm run dev`（开发）
- **用途**：启动开发环境
- **特点**：有热重载、调试工具、额外输出
- **例子**：
  ```json
  "scripts": {
    "dev": "nodemon server.js"
  }
  ```

---

## 三、实际项目对比

### React/Vue 前端项目
```json
{
  "scripts": {
    "start": "react-scripts start",    // 开发服务器（特殊：React 的 start 就是开发）
    "dev": "vite",                     // Vue 开发服务器
    "build": "react-scripts build"     // 打包生产版本
  }
}
```

### Node.js 后端项目
```json
{
  "scripts": {
    "start": "node server.js",         // 生产启动
    "dev": "nodemon server.js",        // 开发（自动重启）
    "test": "jest"                     // 运行测试
  }
}
```

---

## 四、重要差异点

1. **`start` 和 `test` 是特殊命令**
   ```bash
   npm start      # 可以直接用
   npm test       # 可以直接用
   
   npm run dev    # 必须加 run
   npm run build  # 必须加 run
   ```

2. **`npm start` 默认行为**
   如果 `package.json` 里没定义 `start`，npm 会尝试：
   - 找 `server.js`
   - 找 `index.js`
   - 找 `bin` 目录下的可执行文件

3. **开发 vs 生产特性**
   ```json
   {
     "scripts": {
       "start": "NODE_ENV=production node server.js",    // 生产模式
       "dev": "NODE_ENV=development nodemon server.js"   // 开发模式
     }
   }
   ```

---

## 五、如何查看项目用什么命令

看项目的 `package.json`：

```bash
# 查看项目的所有可用命令
cat package.json | grep -A 10 '"scripts"'
```

输出例子：
```json
"scripts": {
  "dev": "vite",
  "build": "tsc && vite build",
  "preview": "vite preview",
  "start": "node dist/index.js"
}
```

---

## 六、记忆技巧

1. **新项目先看 `package.json`**：每个项目可能不同
2. **开发阶段**：通常用 `npm run dev`
3. **部署后**：通常用 `npm start`
4. **React 项目特殊**：`npm start` 就是开发服务器

---

## 七、简单判断方法

```bash
# 1. 先尝试（大多数项目）
npm run dev

# 2. 如果报错，试试
npm start

# 3. 如果还不行，看 package.json
cat package.json
```

---

## 总结

**核心区别**：
- `npm start`：通常是最终启动命令（生产环境）
- `npm run dev`：通常是开发时用的命令（带热重载）

**但记住**：这只是约定，具体要看项目的 `package.json` 里怎么定义。