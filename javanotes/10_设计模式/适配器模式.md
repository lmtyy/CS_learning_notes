# é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰è¯¦è§£

é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§**ç»“æ„å‹è®¾è®¡æ¨¡å¼**ï¼Œå®ƒå…è®¸**ä¸å…¼å®¹çš„æ¥å£ä¹‹é—´èƒ½å¤ŸååŒå·¥ä½œ**ï¼Œå°±åƒç°å®ä¸–ç•Œä¸­çš„ç”µæºé€‚é…å™¨è®©ä¸åŒæ ‡å‡†çš„æ’å¤´èƒ½å¤Ÿæ’å…¥æ’åº§ä¸€æ ·ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

é€‚é…å™¨æ¨¡å¼é€šè¿‡ä¸€ä¸ª**ä¸­é—´å±‚ï¼ˆé€‚é…å™¨ï¼‰**å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ç§æ¥å£ï¼Œè§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜ã€‚

### ä¸‰ç§è§’è‰²ï¼š
1. **ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰**ï¼šå®¢æˆ·ç«¯æœŸæœ›ä½¿ç”¨çš„æ¥å£
2. **è¢«é€‚é…è€…ï¼ˆAdapteeï¼‰**ï¼šéœ€è¦è¢«é€‚é…çš„ç°æœ‰ç»„ä»¶
3. **é€‚é…å™¨ï¼ˆAdapterï¼‰**ï¼šå®ç°ç›®æ ‡æ¥å£å¹¶åŒ…è£…è¢«é€‚é…è€…çš„ä¸­é—´ä»¶

## ä¸¤ç§å®ç°æ–¹å¼

### 1. ç±»é€‚é…å™¨ï¼ˆé€šè¿‡ç»§æ‰¿å®ç°ï¼‰

```java
// ç›®æ ‡æ¥å£
interface USB {
    void connect();
}

// è¢«é€‚é…è€…
class TypeC {
    public void typeCConnect() {
        System.out.println("Type-Cè¿æ¥");
    }
}

// é€‚é…å™¨ï¼ˆç»§æ‰¿è¢«é€‚é…è€…ï¼‰
class TypeCToUSBAdapter extends TypeC implements USB {
    @Override
    public void connect() {
        super.typeCConnect(); // è°ƒç”¨çˆ¶ç±»æ–¹æ³•
    }
}

// ä½¿ç”¨
USB usb = new TypeCToUSBAdapter();
usb.connect(); // è¾“å‡ºï¼šType-Cè¿æ¥
```

### 2. å¯¹è±¡é€‚é…å™¨ï¼ˆé€šè¿‡ç»„åˆå®ç° - æ›´æ¨èï¼‰

```java
// ç›®æ ‡æ¥å£
interface USB {
    void connect();
}

// è¢«é€‚é…è€…
class TypeC {
    public void typeCConnect() {
        System.out.println("Type-Cè¿æ¥");
    }
}

// é€‚é…å™¨ï¼ˆç»„åˆè¢«é€‚é…è€…ï¼‰
class TypeCToUSBAdapter implements USB {
    private TypeC typeC;
    
    public TypeCToUSBAdapter(TypeC typeC) {
        this.typeC = typeC;
    }
    
    @Override
    public void connect() {
        typeC.typeCConnect();
    }
}

// ä½¿ç”¨
TypeC typeC = new TypeC();
USB usb = new TypeCToUSBAdapter(typeC);
usb.connect(); // è¾“å‡ºï¼šType-Cè¿æ¥
```

## å®é™…åº”ç”¨åœºæ™¯

1. **æ—§ç³»ç»Ÿæ•´åˆ**ï¼šå°†é—ç•™ä»£ç é€‚é…åˆ°æ–°ç³»ç»Ÿ
   ```java
   // æ—§ç‰ˆæ—¥å¿—æ¥å£
   class LegacyLogger {
       public void logMessage(String message) {
           System.out.println("Legacy: " + message);
       }
   }
   
   // æ–°ç‰ˆæ—¥å¿—æ¥å£
   interface ModernLogger {
       void log(String msg, String level);
   }
   
   // é€‚é…å™¨
   class LoggerAdapter implements ModernLogger {
       private LegacyLogger legacyLogger;
       
       public LoggerAdapter(LegacyLogger logger) {
           this.legacyLogger = logger;
       }
       
       @Override
       public void log(String msg, String level) {
           legacyLogger.logMessage("[" + level + "] " + msg);
       }
   }
   ```

2. **ç¬¬ä¸‰æ–¹åº“é€‚é…**ï¼šç»Ÿä¸€ä¸åŒåº“çš„æ¥å£
   ```java
   // æ”¯ä»˜ç½‘å…³Açš„æ¥å£
   class PaymentGatewayA {
       public void makePayment(double amount) {
           System.out.println("ä½¿ç”¨GatewayAæ”¯ä»˜: " + amount);
       }
   }
   
   // ç»Ÿä¸€æ”¯ä»˜æ¥å£
   interface UnifiedPayment {
       void pay(double amount);
   }
   
   // é€‚é…å™¨
   class GatewayAAdapter implements UnifiedPayment {
       private PaymentGatewayA gatewayA;
       
       public GatewayAAdapter(PaymentGatewayA gateway) {
           this.gatewayA = gateway;
       }
       
       @Override
       public void pay(double amount) {
           gatewayA.makePayment(amount);
       }
   }
   ```

3. **æ•°æ®æ ¼å¼è½¬æ¢**ï¼šå¦‚XMLåˆ°JSONçš„é€‚é…
   ```java
   interface JSONParser {
       void parseJSON(String json);
   }
   
   class XMLParser {
       public void parseXML(String xml) {
           System.out.println("è§£æXML: " + xml);
       }
   }
   
   class XMLToJSONAdapter implements JSONParser {
       private XMLParser xmlParser;
       
       public XMLToJSONAdapter(XMLParser parser) {
           this.xmlParser = parser;
       }
       
       @Override
       public void parseJSON(String json) {
           String xml = convertJSONtoXML(json);
           xmlParser.parseXML(xml);
       }
       
       private String convertJSONtoXML(String json) {
           // ç®€åŒ–çš„è½¬æ¢é€»è¾‘
           return json.replace("{", "<").replace("}", ">");
       }
   }
   ```

## é€‚é…å™¨æ¨¡å¼çš„ä¼˜åŠ¿

1. **è§£è€¦å®¢æˆ·ç«¯ä¸è¢«é€‚é…è€…**ï¼šå®¢æˆ·ç«¯åªä¾èµ–ç›®æ ‡æ¥å£
2. **å¤ç”¨ç°æœ‰ç±»**ï¼šæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç å°±èƒ½æ•´åˆæ–°åŠŸèƒ½
3. **ç¬¦åˆå¼€é—­åŸåˆ™**ï¼šé€šè¿‡æ–°å¢é€‚é…å™¨ç±»æ¥æ‰©å±•åŠŸèƒ½
4. **çµæ´»æ€§é«˜**ï¼šå¯ä»¥é€‚é…å¤šä¸ªä¸åŒçš„è¢«é€‚é…è€…

## ä¸ç›¸å…³æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼        | ç›®çš„                               | å…³é”®åŒºåˆ«                     |
|------------|-----------------------------------|----------------------------|
| é€‚é…å™¨æ¨¡å¼   | è½¬æ¢æ¥å£ä½¿èƒ½ååŒå·¥ä½œ               | å…³æ³¨æ¥å£å…¼å®¹æ€§              |
| è£…é¥°å™¨æ¨¡å¼   | åŠ¨æ€æ·»åŠ åŠŸèƒ½                       | å…³æ³¨åŠŸèƒ½å¢å¼ºï¼Œæ¥å£ä¸å˜       |
| å¤–è§‚æ¨¡å¼     | ç®€åŒ–å¤æ‚ç³»ç»Ÿçš„æ¥å£                 | æä¾›æ›´é«˜çº§çš„ç»Ÿä¸€æ¥å£         |
| ä»£ç†æ¨¡å¼     | æ§åˆ¶å¯¹å¯¹è±¡çš„è®¿é—®                   | ä¿æŒç›¸åŒæ¥å£ï¼Œæ§åˆ¶è®¿é—®è¡Œä¸º   |

## æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨å¯¹è±¡é€‚é…å™¨**ï¼ˆç»„åˆä¼˜äºç»§æ‰¿ï¼‰
2. **ä¿æŒé€‚é…å™¨å•ä¸€èŒè´£**ï¼šä¸€ä¸ªé€‚é…å™¨åªé€‚é…ä¸€ä¸ªè¢«é€‚é…è€…
3. **è€ƒè™‘æ¥å£ç¨³å®šæ€§**ï¼šå¦‚æœç›®æ ‡æ¥å£ç»å¸¸å˜åŒ–ï¼Œé€‚é…å™¨å¯èƒ½ä¸é€‚ç”¨
4. **ä¸è¦è¿‡åº¦ä½¿ç”¨**ï¼šç³»ç»Ÿå†…è¿‡å¤šé€‚é…å™¨ä¼šå¢åŠ å¤æ‚åº¦

## Javaæ ‡å‡†åº“ä¸­çš„ä¾‹å­

1. **é›†åˆé€‚é…å™¨**ï¼š
   ```java
   String[] array = {"A", "B", "C"};
   List<String> list = Arrays.asList(array); // æ•°ç»„åˆ°Listçš„é€‚é…
   ```

2. **IOæµé€‚é…å™¨**ï¼š
   ```java
   InputStream is = new FileInputStream("file.txt");
   Reader reader = new InputStreamReader(is); // å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„é€‚é…
   ```

é€‚é…å™¨æ¨¡å¼æ˜¯å¤„ç†é—ç•™ä»£ç ã€æ•´åˆç¬¬ä¸‰æ–¹åº“æ—¶çš„åˆ©å™¨ï¼Œå®ƒèƒ½æœ‰æ•ˆé™ä½ç³»ç»Ÿå„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚

---

---

# é€‚é…å™¨æ¨¡å¼ï¼šå°±åƒè½¬æ¥å¤´ä¸€æ ·ç®€å•ï¼

è®©æˆ‘ç”¨ä¸€ä¸ªç”Ÿæ´»ä¸­è¶…çº§å¸¸è§çš„ä¾‹å­å¸®ä½ å½»åº•ç†è§£é€‚é…å™¨æ¨¡å¼ã€‚

## ç°å®ç”Ÿæ´»ä¸­çš„é€‚é…å™¨

æƒ³è±¡ä½ ä»æ—¥æœ¬ä¹°äº†ä¸ªç”µé¥­ç…²ï¼ˆæ—¥æœ¬ç”µå™¨æ˜¯110Vç”µå‹ï¼‰ï¼Œä½†ä¸­å›½çš„æ’åº§æ˜¯220Vçš„ã€‚è¿™æ—¶å€™ä½ éœ€è¦ä»€ä¹ˆï¼Ÿ

ğŸ”Œ **ç”µæºé€‚é…å™¨ï¼ˆå˜å‹å™¨ï¼‰**ï¼å®ƒåšäº†ä¸‰ä»¶äº‹ï¼š
1. æ¥å—ä¸­å›½çš„220Vè¾“å…¥ï¼ˆç›®æ ‡æ¥å£ï¼‰
2. å†…éƒ¨è½¬æ¢æˆ110Vï¼ˆé€‚é…è¿‡ç¨‹ï¼‰
3. è¾“å‡ºç»™æ—¥æœ¬ç”µé¥­ç…²ä½¿ç”¨ï¼ˆè¢«é€‚é…è€…ï¼‰

## ä»£ç ä¸–ç•Œçš„åŒæ ·é—®é¢˜

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè€å¼MP3æ’­æ”¾å™¨ï¼ˆè¢«é€‚é…è€…ï¼‰ï¼Œä½†æ–°æ—¶ä»£çš„æ‰‹æœºï¼ˆå®¢æˆ·ç«¯ï¼‰æƒ³ç”¨ç»Ÿä¸€æ¥å£æ§åˆ¶å®ƒï¼š

```java
// è€å¼MP3æ’­æ”¾å™¨ï¼ˆåƒæ—¥æœ¬ç”µé¥­ç…²ï¼‰
class OldMP3 {
    public void playMusic() {
        System.out.println("æ’­æ”¾è€å¼MP3éŸ³ä¹...");
    }
}

// æ–°æ—¶ä»£æ™ºèƒ½è®¾å¤‡æ¥å£ï¼ˆåƒä¸­å›½æ’åº§ï¼‰
interface SmartDevice {
    void play(); // ç»Ÿä¸€æ’­æ”¾æ–¹æ³•
}

// é€‚é…å™¨ï¼ˆåƒç”µæºè½¬æ¢å™¨ï¼‰
class MP3Adapter implements SmartDevice {
    private OldMP3 oldMP3;  // è£…å…¥è€è®¾å¤‡
    
    public MP3Adapter(OldMP3 mp3) {
        this.oldMP3 = mp3;
    }
    
    @Override
    public void play() {  // ç»Ÿä¸€æ¥å£æ–¹æ³•
        oldMP3.playMusic(); // å†…éƒ¨è°ƒç”¨è€è®¾å¤‡çš„æ–¹æ³•
    }
}
```

## æ€ä¹ˆä½¿ç”¨ï¼Ÿ

```java
public class Test {
    public static void main(String[] args) {
        // è€è®¾å¤‡
        OldMP3 walkman = new OldMP3();
        
        // æ–°è®¾å¤‡é€šè¿‡é€‚é…å™¨ä½¿ç”¨è€è®¾å¤‡
        SmartDevice device = new MP3Adapter(walkman);
        
        device.play();  // è¾“å‡ºï¼šæ’­æ”¾è€å¼MP3éŸ³ä¹...
    }
}
```

## å…³é”®ç‚¹æ¯”å–»

| æ¦‚å¿µ         | ç°å®ä¾‹å­              | ä»£ç å¯¹åº”                |
|-------------|----------------------|------------------------|
| ç›®æ ‡æ¥å£     | ä¸­å›½æ’åº§æ ‡å‡†          | `SmartDevice` æ¥å£     |
| è¢«é€‚é…è€…     | æ—¥æœ¬ç”µé¥­ç…²            | `OldMP3` ç±»           |
| é€‚é…å™¨       | ç”µå‹è½¬æ¢å™¨            | `MP3Adapter` ç±»       |
| å®¢æˆ·ç«¯       | ä½¿ç”¨ç”µå™¨çš„äºº          | `main()` æ–¹æ³•ä¸­çš„è°ƒç”¨ |

## å¦ä¸€ä¸ªç”ŸåŠ¨ä¾‹å­ï¼šè¯»å¡å™¨

ä½ ç›¸æœºé‡Œçš„SDå¡ï¼ˆè¢«é€‚é…è€…ï¼‰ä¸èƒ½ç›´æ¥æ’åˆ°USBæ¥å£ï¼ˆç›®æ ‡æ¥å£ï¼‰ä¸Šï¼Œæ€ä¹ˆåŠï¼Ÿ

ğŸ“¸ **ä½¿ç”¨è¯»å¡å™¨ï¼ˆé€‚é…å™¨ï¼‰**ï¼š
1. è¯»å¡å™¨å®ç°USBæ¥å£
2. å†…éƒ¨å¯ä»¥æ’å…¥SDå¡
3. ç”µè„‘é€šè¿‡USBæ¥å£è¯»å†™SDå¡

```java
// SDå¡ï¼ˆè¢«é€‚é…è€…ï¼‰
class SDCard {
    public String readData() {
        return "SDå¡ä¸­çš„æ•°æ®";
    }
}

// USBæ¥å£ï¼ˆç›®æ ‡æ¥å£ï¼‰
interface USB {
    String getData();
}

// è¯»å¡å™¨ï¼ˆé€‚é…å™¨ï¼‰
class CardReader implements USB {
    private SDCard sdCard;
    
    public CardReader(SDCard card) {
        this.sdCard = card;
    }
    
    @Override
    public String getData() {
        return sdCard.readData(); // è½¬æ¢è°ƒç”¨
    }
}

// ä½¿ç”¨
SDCard card = new SDCard();
USB usb = new CardReader(card);
System.out.println(usb.getData()); // è¾“å‡ºï¼šSDå¡ä¸­çš„æ•°æ®
```

## ä¸ºä»€ä¹ˆéœ€è¦é€‚é…å™¨ï¼Ÿ

1. **ä¸ä¿®æ”¹è€ä»£ç **ï¼šä¸ç”¨æ”¹SDå¡å’ŒUSBæ¥å£çš„è®¾è®¡
2. **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰å­˜å‚¨è®¾å¤‡éƒ½é€šè¿‡USBæ¥å£è®¿é—®
3. **çµæ´»æ‰©å±•**ï¼šæœªæ¥å¯ä»¥è½»æ¾æ”¯æŒå…¶ä»–å­˜å‚¨å¡ç±»å‹

## æ€»ç»“ä¸€å¥è¯

é€‚é…å™¨æ¨¡å¼å°±æ˜¯ï¼š**è®©ä¸¤ä¸ªä¸å…¼å®¹çš„ä¸œè¥¿èƒ½å¤Ÿä¸€èµ·å·¥ä½œï¼Œè€Œä¸”ä¸ç”¨æ”¹åŠ¨å®ƒä»¬åŸæ¥çš„è®¾è®¡**ï¼Œå°±åƒç»™è€è®¾å¤‡è£…äº†ä¸ªè½¬æ¥å¤´ï¼