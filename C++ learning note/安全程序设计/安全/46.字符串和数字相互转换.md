在C++中，字符串和数字类型相互转换有多种库函数方法。让我为你详细总结：

## 1. C风格传统方法（最古老）

### 数字转字符串
```cpp
#include <cstdio>  // sprintf
#include <cstdlib> // itoa (非标准但常见)

void c_style_conversion() {
    char buffer[50];
    
    // 整数转字符串
    int num = 12345;
    sprintf(buffer, "%d", num);
    
    // 浮点数转字符串
    double pi = 3.14159;
    sprintf(buffer, "%.2f", pi);
    
    // 非标准的itoa（某些编译器支持）
    // itoa(num, buffer, 10); // 10表示十进制
}
```

### 字符串转数字
```cpp
#include <cstdlib> // atoi, atof, atol

void c_style_string_to_number() {
    const char* str = "12345";
    
    // 字符串转整数
    int i = atoi(str);        // ASCII to integer
    long l = atol(str);       // ASCII to long
    double d = atof("3.14");  // ASCII to float
    
    // 更安全的版本（有错误检查）
    char* endptr;
    long value = strtol(str, &endptr, 10); // 基数10
    if (*endptr != '\0') {
        // 转换失败处理
    }
}
```

## 2. C++98/03 标准方法

### 使用 stringstream（最通用）
```cpp
#include <sstream>
#include <string>

void stringstream_demo() {
    // 数字转字符串
    std::stringstream ss;
    int num = 42;
    ss << num;
    std::string str = ss.str();
    
    // 字符串转数字
    std::string num_str = "123";
    int result;
    ss.clear(); // 清除状态
    ss.str(num_str); // 设置新字符串
    ss >> result;
    
    // 检查是否成功
    if (ss.fail()) {
        // 转换失败处理
    }
}
```

### 专用函数模板
```cpp
#include <string>
#include <sstream>

template<typename T>
std::string number_to_string(T value) {
    std::stringstream ss;
    ss << value;
    return ss.str();
}

template<typename T>
T string_to_number(const std::string& str) {
    std::stringstream ss(str);
    T result;
    ss >> result;
    if (ss.fail()) {
        throw std::invalid_argument("转换失败");
    }
    return result;
}
```

## 3. C++11 新标准函数

### std::to_string 系列（数字转字符串）
```cpp
#include <string>

void cpp11_to_string() {
    // 各种数字类型转字符串
    std::string s1 = std::to_string(42);        // int
    std::string s2 = std::to_string(3.14);      // double
    std::string s3 = std::to_string(123L);      // long
    std::string s4 = std::to_string(123ULL);    // unsigned long long
    
    // 支持的类型：int, long, long long, unsigned, 
    // unsigned long, unsigned long long, float, double, long double
}
```

### std::sto_ 系列（字符串转数字）
```cpp
#include <string>
#include <iostream>

void cpp11_sto_functions() {
    try {
        // 字符串转整数
        std::string int_str = "123";
        int i = std::stoi(int_str);
        
        // 字符串转long
        long l = std::stol("1234567890");
        
        // 字符串转long long
        long long ll = std::stoll("123456789012345");
        
        // 字符串转无符号long
        unsigned long ul = std::stoul("123");
        
        // 字符串转浮点数
        float f = std::stof("3.14");
        double d = std::stod("3.1415926");
        long double ld = std::stold("3.14159265358979");
        
        // 可以指定转换的字符数量
        std::string big_num = "123abc";
        size_t pos;
        int num = std::stoi(big_num, &pos); // pos会指向第一个非数字字符
        std::cout << "数字: " << num << ", 停止位置: " << pos << std::endl;
        
    } catch (const std::invalid_argument& e) {
        std::cout << "无效参数: " << e.what() << std::endl;
    } catch (const std::out_of_range& e) {
        std::cout << "超出范围: " << e.what() << std::endl;
    }
}
```

## 4. 更现代的方法（C++17/C++20）

### std::from_chars / std::to_chars（高性能）
```cpp
#include <charconv> // C++17
#include <array>

void chars_conversion() {
    // 数字转字符串（高性能，不分配内存）
    int num = 42;
    std::array<char, 10> buffer;
    
    auto [ptr, ec] = std::to_chars(buffer.data(), 
                                  buffer.data() + buffer.size(), 
                                  num);
    if (ec == std::errc()) {
        std::string result(buffer.data(), ptr);
        std::cout << "转换结果: " << result << std::endl;
    }
    
    // 字符串转数字（高性能）
    std::string num_str = "123.45";
    double value;
    auto [end, error] = std::from_chars(num_str.data(), 
                                       num_str.data() + num_str.size(), 
                                       value);
    if (error == std::errc()) {
        std::cout << "解析的数字: " << value << std::endl;
    }
}
```

## 5. 完整实用示例

```cpp
#include <iostream>
#include <string>
#include <sstream>
#include <charconv>
#include <vector>

class NumberConverter {
public:
    // 方法1: 使用std::to_string (C++11)
    template<typename T>
    static std::string toString(T value) {
        return std::to_string(value);
    }
    
    // 方法2: 使用stringstream (兼容性好)
    template<typename T>
    static std::string toStringStream(T value) {
        std::stringstream ss;
        ss << value;
        return ss.str();
    }
    
    // 方法3: 字符串转数字 with error handling
    template<typename T>
    static T fromString(const std::string& str, bool* success = nullptr) {
        try {
            if constexpr (std::is_same_v<T, int>) {
                return std::stoi(str);
            } else if constexpr (std::is_same_v<T, double>) {
                return std::stod(str);
            } else if constexpr (std::is_same_v<T, long>) {
                return std::stol(str);
            }
            // 可以继续添加其他类型
        } catch (const std::exception& e) {
            if (success) *success = false;
            return T{};
        }
        if (success) *success = true;
        return T{};
    }
    
    // 方法4: 高性能转换 (C++17)
    static bool tryConvert(const std::string& str, int& result) {
        auto [ptr, ec] = std::from_chars(str.data(), 
                                        str.data() + str.size(), 
                                        result);
        return ec == std::errc() && ptr == str.data() + str.size();
    }
};

// 使用示例
int main() {
    // 数字转字符串
    std::cout << "to_string: " << NumberConverter::toString(3.14159) << std::endl;
    std::cout << "stringstream: " << NumberConverter::toStringStream(42) << std::endl;
    
    // 字符串转数字
    bool success;
    int num = NumberConverter::fromString<int>("123", &success);
    if (success) {
        std::cout << "解析成功: " << num << std::endl;
    }
    
    // 高性能转换
    int result;
    if (NumberConverter::tryConvert("456", result)) {
        std::cout << "高性能转换: " << result << std::endl;
    }
    
    return 0;
}
```

## 6. 各方法比较总结

| 方法 | C++版本 | 优点 | 缺点 |
|------|---------|------|------|
| C风格函数 | C++98 | 简单，性能好 | 不安全，无错误处理 |
| stringstream | C++98 | 通用性强，类型安全 | 性能较差，较重 |
| std::to_string | C++11 | 简洁易用 | 格式化控制有限 |
| std::sto_系列 | C++11 | 有异常处理，安全 | 性能不如from_chars |
| std::from_chars | C++17 | 高性能，不抛异常 | 使用稍复杂 |

根据你的需求选择合适的转换方法：需要兼容性用stringstream，需要简洁用to_string，需要高性能用from_chars。