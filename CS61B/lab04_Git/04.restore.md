# Git restore 命令笔记

## 功能概述
`git restore` 用于将文件恢复到之前的版本状态

## 两种恢复模式

### 1. 恢复到最新提交版本
```bash
git restore [文件路径]
```
- **功能**：将指定文件恢复到最近一次提交的状态
- **使用场景**：丢弃当前未提交的修改，回到上次提交的版本
- **示例**：
  ```bash
  git restore src/main.java    # 恢复单个文件
  git restore .                # 恢复所有修改的文件
  ```

### 2. 恢复到特定提交版本
```bash
git restore --source=[commitID] [文件路径]
```
- **功能**：将文件恢复到指定提交ID的版本状态
- **参数说明**：
  - `--source=[commitID]`：指定目标提交的ID（可以是完整或前7位哈希值）
  - `[文件路径]`：要恢复的文件路径
- **使用场景**：需要回退到某个历史版本时使用
- **示例**：
  ```bash
  git restore --source=8g955d8 src/main.java
  git restore --source=HEAD~1   # 恢复到上一个提交版本
  ```

## 使用技巧

### 获取 commitID
```bash
git log --oneline  # 查看简化的提交历史和ID
```

### 常用恢复场景
| 场景 | 命令 | 说明 |
|------|------|------|
| 丢弃单个文件的修改 | `git restore file.txt` | 回到最新提交版本 |
| 恢复到特定历史版本 | `git restore --source=abc1234 file.txt` | 使用具体commitID |
| 恢复到上一个版本 | `git restore --source=HEAD~1 file.txt` | 使用相对引用 |
| 恢复所有修改 | `git restore .` | 谨慎使用！ |

## 注意事项
- ⚠️ `git restore` 会覆盖当前工作区的修改，且不可撤销
- ⚠️ 恢复前建议先提交当前更改，或使用 `git stash` 暂存修改
- ✅ 恢复特定版本前，先用 `git log` 确认正确的 commitID
- ✅ 测试恢复后的代码是否正常工作

## 相关命令对比
| 命令 | 功能 | 区别 |
|------|------|------|
| `git restore` | 恢复文件到指定版本 | 直接修改工作区文件 |
| `git reset` | 重置提交历史 | 修改版本库历史 |
| `git checkout` | 切换分支或恢复文件 | 较老版本的恢复方式 |

> **提示**：`git restore` 是较新的命令，替代了之前 `git checkout -- [file]` 的部分功能