好的！这些是 Docker 容器生命周期管理中最基本的操作，我们来详细讲解。

---

## 一、停止容器

### 1. **优雅停止**（推荐）
```bash
# 停止一个正在运行的容器
docker stop <容器名或容器ID>

# 示例
docker stop my-nginx
docker stop abc123def456
```

**工作原理：**
- 向容器内的主进程发送 `SIGTERM` 信号
- 等待一段时间（默认10秒）让进程完成清理工作
- 如果超时后进程仍在运行，则强制发送 `SIGKILL` 信号

### 2. **指定停止超时时间**
```bash
# 等待 30 秒后强制停止
docker stop -t 30 my-nginx
```

### 3. **强制停止**（相当于断电）
```bash
# 立即强制停止容器
docker kill <容器名或容器ID>

# 示例
docker kill my-nginx
```

**`stop` vs `kill`：**
- `stop`：优雅停止，给进程清理的机会
- `kill`：强制停止，立即终止

---

## 二、启动容器

### 1. **启动已停止的容器**
```bash
# 启动一个已停止的容器
docker start <容器名或容器ID>

# 示例
docker start my-nginx
```

### 2. **重启容器**
```bash
# 重启容器（先停止再启动）
docker restart <容器名或容器ID>

# 示例
docker restart my-nginx
```

### 3. **启动并附加到终端**
```bash
# 启动容器并连接到它的终端
docker start -a <容器名或容器ID>
```

---

## 三、删除容器

### 1. **删除已停止的容器**
```bash
# 删除一个已停止的容器
docker rm <容器名或容器ID>

# 示例
docker rm my-nginx
```

### 2. **强制删除运行中的容器**
```bash
# 强制删除容器（即使正在运行）
docker rm -f <容器名或容器ID>

# 示例
docker rm -f my-nginx
```

### 3. **删除容器时同时删除关联的数据卷**
```bash
# 删除容器并同时删除其创建的数据卷
docker rm -v <容器名或容器ID>
```

---

## 四、实用操作组合

### 1. **停止并删除单个容器**
```bash
# 先停止再删除（安全做法）
docker stop my-nginx && docker rm my-nginx

# 或者直接强制删除运行中的容器
docker rm -f my-nginx
```

### 2. **停止所有运行中的容器**
```bash
# 停止所有正在运行的容器
docker stop $(docker ps -q)
```

### 3. **删除所有已停止的容器**
```bash
# 删除所有已停止的容器
docker rm $(docker ps -aq)

# 或者使用 prune 命令（推荐）
docker container prune
```

### 4. **一键清理所有容器**
```bash
# 停止并删除所有容器（包括运行中的）
docker rm -f $(docker ps -aq)
```

---

## 五、查看容器状态

在操作前后，可以使用这些命令查看状态：

### 1. **查看运行中的容器**
```bash
docker ps
```

### 2. **查看所有容器（包括已停止的）**
```bash
docker ps -a
```

### 3. **查看容器详细信息**
```bash
docker inspect <容器名或容器ID>
```

---

## 六、完整工作流程示例

让我们通过一个完整示例来演示整个生命周期：

```bash
# 1. 运行一个 Nginx 容器
docker run -d --name my-website -p 8080:80 nginx

# 2. 查看运行状态
docker ps

# 3. 停止容器
docker stop my-website

# 4. 查看所有容器（包括已停止的）
docker ps -a

# 5. 再次启动容器
docker start my-website

# 6. 重启容器
docker restart my-website

# 7. 最终停止并删除容器
docker stop my-website && docker rm my-website

# 8. 验证容器已删除
docker ps -a
```

---

## 七、最佳实践建议

1. **停止前先思考**：
   - 使用 `docker stop` 而不是 `docker kill`，除非容器无响应
   - 给应用程序足够的时间进行清理和保存

2. **删除前确认**：
   - 使用 `docker ps -a` 确认要删除的容器
   - 重要数据记得备份或使用数据卷

3. **使用容器名**：
   - 给容器起有意义的名称，比使用容器ID更方便管理

4. **定期清理**：
   ```bash
   # 定期清理所有已停止的容器
   docker container prune
   ```

---

## 总结

| 操作 | 命令 | 用途 |
|------|------|------|
| **停止** | `docker stop` | 优雅停止容器 |
| **强制停止** | `docker kill` | 立即停止容器 |
| **启动** | `docker start` | 启动已停止的容器 |
| **重启** | `docker restart` | 重启容器 |
| **删除** | `docker rm` | 删除已停止的容器 |
| **强制删除** | `docker rm -f` | 删除运行中的容器 |

记住这些命令，你就能熟练管理 Docker 容器的整个生命周期了！