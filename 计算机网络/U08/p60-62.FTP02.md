这三页课件深入展示了 FTP 在执行任务时，其**控制连接**与**数据连接**是如何在底层通过不同的端口进行协作的。

这是理解 FTP 运作逻辑的精华部分：

---

### 1. 控制连接策略 (Control connection strategy)

对应 **image_2a0627.png**，这展示了双方如何“建立对话”：

* **服务器端**：使用熟知端口 **21** 处于监听状态。
* **客户端**：会随机开启一个临时端口（图中示例为 **5122**）。
* **功能**：这条连接一旦建立，就会在整个 FTP 会话期间保持开启。它只负责传达“我要下载这个文件”或“我要登录”等**指令**。

### 2. 数据连接策略 (Data connection strategy)

对应 **image_2a062c.png**，这展示了文件内容是如何真正传输的：

* **服务器端**：使用熟知端口 **20**。
* **客户端**：会开启**另一个**临时端口（图中示例为 **5137**）。
* **注意箭头**：图中红色的粗箭头展示了控制流的走向——客户端通过端口 5122 告诉服务器：“请把数据发到我的 5137 端口上”。
* **特点**：这是一条**瞬时连接**。每传一个文件，这条路就开一次；传完了，这条路就立刻拆掉。

### 3. FTP 完整架构全景图

对应 **image_2a0381.png**，这张图把所有的组件串联在了一起：

* **用户界面 (User Interface)**：位于最顶层，是你平时看到的 FileZilla 或命令行窗口。
* **协议解释器 (FTP Client/Server Protocol)**：负责处理控制连接（端口 21），它们之间交换的是指令和响应。
* **数据转移进程 (Data transfer Protocol)**：负责处理数据连接（端口 20），它们直接与两边的**文件系统 (FS)** 打交道，完成二进制数据的搬运。

---

### 💡 核心知识点梳理（考试常备）

| 维度 | 控制连接 (Control) | 数据连接 (Data) |
| --- | --- | --- |
| **标准端口** | **21** | **20** |
| **主要职责** | 传指令（用户名、密码、命令） | 传文件（实际的数据流） |
| **状态** | **持续性** (Persistent) | **非持续性** (Non-persistent) |
| **关系** | 控制连接必须先于数据连接建立。 | 每一个文件传输都需要一个独立的数据连接。 |

**下一步建议：**
你现在的课件展示的是**主动模式 (Active Mode)**，即服务器主动连回客户端的端口 5137。但在现代网络中（有防火墙的情况下），这经常会失败。你想看看**被动模式 (Passive Mode)** 是如何反过来解决这个问题的吗？