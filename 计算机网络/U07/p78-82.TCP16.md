这五页课件（从 image_1c63a8 到 image_1c63fd）揭示了 TCP 最具智慧的部分：**拥塞控制（Congestion Control）的具体算法实现**。

它通过动态调整一个关键变量——**拥塞窗口（Congestion Window, cwnd）**，来探测网络到底能跑多快。

---

### 1. 发送方的双重约束 (image_1c63a8, 1c63c2)

在拥塞控制开启后，发送方不再只听接收方的话，它现在必须同时维护两个窗口：

* **接收窗口 (rwnd)**：由接收方在报文首部通告，防止“噎死”接收方。
* **拥塞窗口 (cwnd)**：由发送方根据网络拥堵情况自己估算，防止“堵死”网络。
* **最终准则**：实际能发送的数据量 = ****。

---

### 2. 第一阶段：慢启动 (Slow Start) (image_1c63dd)

虽然名字叫“慢”，但它的增长速度其实是**指数级**的。

* **初始状态**： 个最大报文段长度（MSS）。
* **规则**：每收到一个确认（ACK）， 就加 1。
* **效果**：每经过一个往返时间（RTT），发送的包量就会**翻倍**（1  2  4  8...）。
* **停止条件**：直到发生“丢包事件”或者达到了预设的“阈值（threshold）”。

---

### 3. 第二阶段：拥塞避免 (Congestion Avoidance) (image_1c63e2)

当  达到阈值后，TCP 变得小心翼翼，进入“加法增长”阶段。

* **时机**：慢启动达到阈值后切换。
* **规则（累计增加）**：每个 RTT 只给  加 1（不管收到了多少个 ACK）。
* **目的**：线性探测网络的剩余带宽，尽量推迟拥塞的发生。

---

### 4. 拥塞检测与惩罚 (image_1c63e2)

当网络真的堵死（出现超时）时，TCP 会进行“断崖式”的惩罚：

* **阈值重设**：把当前的  砍掉一半，作为新的阈值。
* **一夜回到解放前**：直接把  **重置为 1**，重新开始慢启动。

---

### 5. 算法演进全景图 (image_1c63fd)

这张折线图是期末考试的**必考图**，展示了  随时间的变化轨迹：

1. **左侧陡峭曲线**：慢启动，指数级攀升到 32KB。
2. **平缓斜线**：达到阈值 32KB 后，进入拥塞避免，线性增长。
3. **垂直坠落 (Timeout)**：在 40KB 处发现超时，认为发生拥塞。
* **新阈值**  KB。
* ** 降回 1**。


4. **右侧重复**：从 1 开始慢启动到新阈值 20KB，再次进入拥塞避免。

---

### 🎓 核心笔记

作为大学生，你需要理解这种设计的**哲学**：

> **乘性减（Multiplicative Decrease）**：发现拥塞立刻大幅度减速，这是为了维持网络的稳定性，具有“牺牲精神”。
> **加性增（Additive Increase）**：网络空闲时慢慢试探，这是为了公平地与其他连接分享带宽。

这套逻辑被称为 **AIMD（加性增乘性减）**。你想了解一下，为什么现在的 TCP 还有个“快重传/快恢复”机制，能让  不用非得跌回 1 吗？