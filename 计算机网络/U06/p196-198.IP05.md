这三张图帮你补齐了 **IP 首部 (IP Header)** 的最后一块拼图。恭喜你，看完这三张，你对 IP 数据包结构的理解就完整了！

我们按重要程度和逻辑顺序来讲：

### 1. 最核心的身份信息：IP 地址 (图 image_cc8932.jpg)

这是整个 IP 首部里**最重要、绝对不能填错**的部分。

* **Source IP Address (源 IP 地址)**：32位。代表“谁发的”。
* **Destination IP Address (目的 IP 地址)**：32位。代表“发给谁”。
* **关键复习**：还记得我们之前说的吗？这两个地址在漫长的传输过程中（经过无数个路由器）是**始终不变**的。

### 2. 可有可无的“附加服务”：选项 (图 image_cc868b.jpg)

IP 协议设计得很灵活，它允许你在标准首部后面加一些“私货”。

* **字段**：**IP OPTIONS (IP 选项)**。
* **特点**：
* **非必须**：课件写着 "It is not required in every datagram"。绝大多数普通的数据包里这个字段都是空的。
* **用途**：主要用于**网络测试和调试 (Network testing and debugging)**。
* *例子：比如 "Record Route"（记录路由）选项，可以让数据包每经过一个路由器，就让路由器把自己的 IP 签个名写在这里，这样到了终点就能知道它走了哪些路。*



### 3. 强迫症的补丁：填充 (图 image_cc866f.jpg)

这个字段是给“选项”字段擦屁股的。

* **字段**：**PADDING (填充)**。
* **背景**：计算机处理数据时，喜欢整整齐齐。IP 协议规定，**首部的总长度必须是 32位 (4字节) 的整数倍**。
* **问题**：上面的 **IP Options** 长度是不固定的。万一选项只占了 3 个字节，那首部长度就不是 4 的倍数了，机器读起来会很难受。
* **解决**：加 **Padding**。用一堆 **0** 把剩下的空间填满，强行凑成 32 位的整数倍。

---

### 🎓 IP 首部全景总结

到现在为止，我们把 IP 首部的 5 行半内容全拆解完了。为了帮你复习，我把它们归纳为**“五大功能区”**：

1. **物流基础区**：`Version`, `HLEN`, `Total Length` —— 告诉路由器这是什么包，有多大。
2. **分片重组区**：`Identification`, `Flags`, `Offset` —— 包太大切碎了怎么拼。
3. **生存控制区**：`TTL`, `Protocol` —— 防止死循环，以及到了终点交给谁（TCP/UDP）。
4. **安检区**：`Header Checksum` —— 检查头部坏没坏。
5. **地址区**：`Source IP`, `Dest IP` —— 从哪来，到哪去。

掌握了这五大块，IP 协议这一章最枯燥的理论部分你就拿下了！接下来通常会进入非常有意思（但也比较烧脑）的 **“子网划分 (Subnetting)”** 计算环节了。