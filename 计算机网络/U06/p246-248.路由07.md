这三张课件（`image_dc72aa.jpg` 到 `image_dc7273.jpg`）是路由查找过程的**实战拆解**。它们一步步展示了路由器收到一个具体的 IP 地址后，是如何翻看自己的“小抄”（路由表）并决定从哪个口把包发出去的。

这里展示了一个非常重要的计算公式：**目的 IP AND 子网掩码 = 网络地址**。

---

### 1. 场景设定

* **任务**：路由器 R1 收到一个目的地为 `128.30.33.138` (主机 H2) 的数据包。
* **现状**：R1 的路由表里有三条路：
1. 去往 `128.30.33.0` 段（掩码 `/25`），走 **Int 0** 接口。
2. 去往 `128.30.33.128` 段（掩码 `/25`），走 **Int 1** 接口。
3. 去往 `128.30.36.0` 段（掩码 `/24`），走 **R2**。



---

### 2. 第一步：尝试匹配第一条路径 (图 image_dc728e.jpg)

路由器开始“安检”：

* **计算**：它把目的地 `128.30.33.138` 与第一行的掩码 `255.255.255.128` 进行二进制 **AND (与)** 运算。
* **结果**：算出该 IP 属于 `128.30.33.128` 网络。
* **比对**：它发现算出来的 `128.30.33.128` 与第一行登记的目的地 `128.30.33.0` **不一致**。
* **结论**：**No match (不匹配)**。路由器跳过这一行，看下一行。

---

### 3. 第二步：成功锁定目标 (图 image_dc7273.jpg)

路由器继续比对第二行：

* **计算**：同样，把目的地 `128.30.33.138` 与第二行的掩码 `255.255.255.128` 做 AND 运算。
* **结果**：依然算出 `128.30.33.128`。
* **比对**：**Match (匹配)！** 算出的结果正好等于第二行登记的目的网络 `128.30.33.128`。
* **执行**：路由器看了一眼对应的 Next-hop，是 **Int 1**。于是，它毫不犹豫地把包从 **1 号接口** 弹射了出去，顺利送往主机 H2 所在的网络。

---

### 💡 核心知识点总结

这两张图展示了路由查找的**本质**：

1. **逐行扫描**：路由器对每一条路由项都会重复执行“IP 与 掩码”的计算。
2. **网络地址是关键**：路由器不关心你的具体门牌号（`.138`），它只关心通过掩码算出来的“街道名”（`.128`）在不在表里。
3. **计算是实时的**：这就是为什么我们说路由器需要高性能 CPU，因为每进一个包，它都要做一堆二进制加法和乘法。

**下一步建议**：
如果一个 IP 同时匹配上了表里的两行（比如一个掩码是 `/24`，一个是 `/25`），路由器会陷入纠结吗？它会遵循**“最长前缀匹配”**原则，你想知道这个规则是怎么解决矛盾的吗？