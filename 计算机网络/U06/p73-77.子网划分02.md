这几页详细讲解了 **子网掩码（Subnet Mask）** 的概念和计算方法。这是子网划分的核心工具。我来为你系统解释：

---

## **一、什么是子网掩码？**

### **1. 基本定义**
- **长度**：32位（与IP地址相同）
- **结构**：
  - **==网络+子网部分==**：全为1
  - **主机部分**：全为0
- **作用**：明确划分IP地址中哪些位标识网络/子网，哪些位标识主机

### **2. 直观理解**
```
IP地址：11001010.01110110.01100100.10111010  (202.118.100.186)
子网掩码：11111111.11111111.11111111.11000000  (255.255.255.192)

分割线：                  网络/子网部分 | 主机部分
```

---

## **二、子网掩码的两种表示法**

### **1. 点分十进制表示法**
- 示例：`255.255.255.192`
- 二进制：`11111111.11111111.11111111.11000000`
- 特点：直观，但计算时需要转换二进制

### **2. CIDR表示法（斜线记法）**
- 示例：`/26`
- 含义：**网络+子网部分有26位**
- 计算：`202.118.1.60/26` = `202.118.1.60`，子网掩码 `255.255.255.192`
- 优势：更简洁，直接知道网络前缀长度

---

## **三、关键操作：AND运算**

### **1. AND运算规则**
```
0 AND 0 = 0
0 AND 1 = 0
1 AND 0 = 0  
1 AND 1 = 1
```

### **2. 如何找到网络地址**
```
步骤：
1. 将IP地址转换为二进制
2. 将子网掩码转换为二进制
3. 对两个二进制数进行AND运算
4. 结果就是网络地址

示例（第二页）：
IP地址：   202.118.100.186 → 11001010.01110110.01100100.10111010
子网掩码： 255.255.255.192 → 11111111.11111111.11111111.11000000
AND运算：                11001010.01110110.01100100.10000000
结果：                    202      .118      .100      .128
网络地址：202.118.100.128
```

---

## **四、子网掩码的特性**

### **1. 连续1规则**
- 子网掩码中的1**必须连续**，从左到右，不能间断
- ✅ 正确：`11111111.11111111.11111111.11000000`（/26）
- ❌ 错误：`11111111.11111111.11111111.10100000`（1和0交替）

### **2. 与分类地址的关系**
```
分类地址的默认掩码：
- A类：255.0.0.0 或 /8
- B类：255.255.0.0 或 /16  
- C类：255.255.255.0 或 /24

子网划分就是延长这个掩码（增加1的数量）
```

---

## **五、实际计算示例**

### **示例1：判断两个主机是否在同一子网**
```
主机A：192.168.1.65，掩码255.255.255.192
主机B：192.168.1.130，掩码255.255.255.192

计算网络地址：
主机A：192.168.1.65 AND 255.255.255.192 = 192.168.1.64
主机B：192.168.1.130 AND 255.255.255.192 = 192.168.1.128

结果：网络地址不同（64 ≠ 128）→ 不在同一子网
```

### **示例2：CIDR表示法解析**
```
给定：172.16.65.100/20

解读：
1. /20 表示前20位是网络+子网部分
2. 掩码：255.255.240.0
   （11111111.11111111.11110000.00000000）
3. 计算网络地址：
   172.16.65.100 AND 255.255.240.0 = 172.16.64.0
```

---

## **六、子网掩码的作用总结**

### **1. 确定网络边界**
- 通过AND运算得到网络地址
- 知道哪些设备在同一个广播域

### **2. 路由决策**
- 路由器比较目标IP和掩码，确定下一跳
- 路由表中存储的是**网络地址+掩码**，不是单个IP

### **3. 地址规划**
- 帮助网络管理员合理划分子网
- 计算每个子网的可用主机范围

---

## **七、重要公式和规则**

### **1. 可用主机数计算**
```
可用主机数 = 2^(主机位数) - 2
主机位数 = 32 - 掩码中1的个数

示例：/26 掩码
主机位数 = 32 - 26 = 6
可用主机数 = 2^6 - 2 = 62
```

### **2. 子网数量计算**
```
子网数 = 2^(借位数量)
借位数量 = 新掩码1的个数 - 原分类掩码1的个数

示例：C类地址（/24）借2位到/26
借位数量 = 26 - 24 = 2
子网数 = 2^2 = 4
```

---

## **八、现代网络中的子网掩码**

### **1. 默认使用CIDR**
- 现代网络几乎都用CIDR表示法
- 如：`192.168.1.0/24`、`10.0.0.0/8`

### **2. VLSM（可变长子网掩码）**
- 允许同一个网络中使用不同长度的子网掩码
- 更精细的地址分配，进一步减少浪费

### **3. 配置示例**
```bash
# Linux配置IP和掩码
$ ip addr add 192.168.1.100/24 dev eth0

# 等价于
$ ip addr add 192.168.1.100 dev eth0
$ ip addr add 255.255.255.0 dev eth0
```

---

## **九、一句话总结**

> **子网掩码是一把"尺子"，通过AND运算测量出IP地址中的网络部分，让设备知道"我是哪个网络的，我能和谁直接说话"。**

掌握了子网掩码，你就能：
1. **计算任意IP的网络地址**
2. **划分子网并分配地址**
3. **诊断网络连接问题**
4. **配置路由器和防火墙**

如果你想练习 **具体的子网划分计算题** 或 **学习VLSM的进阶应用**，我可以继续讲解。需要吗？