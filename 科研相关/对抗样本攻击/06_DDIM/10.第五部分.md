**第五部分：实验 (Experiments)**

这是论文的“晒成绩单”环节。对于做科研的你来说，读实验部分不仅要看结论，更要学习**怎么设计实验来证明你的观点**。

作者在这一章通过五个精心设计的实验，全方位展示了 DDIM 的优越性。这对你未来设计自己的论文实验非常有参考价值。

我们从这五个角度来解读：

---

### 1. 速度与画质的权衡 (Sample Quality and Efficiency)
**(对应 5.1 节，Table 1 & Figure 3 & Figure 4)**

*   **问题**：DDIM 到底能不能加速？加速后画质会不会崩？
*   **实验设计**：
    *   **横轴（采样步数）**：$S = 10, 20, 50, 100, 1000$。
    *   **纵轴（FID 分数）**：FID 越低越好，代表生成的图片越真实。
    *   **对比项**：DDIM ($\eta=0$) vs DDPM ($\eta=1$)。
*   **结论（关键数据）**：
    *   **短跑冠军**：在 $S=10, 20, 50, 100$ 这些短步数下，**DDIM 完胜**。甚至 50 步的 DDIM 画质就能打平 1000 步的 DDPM。
    *   **长跑略输**：在 $S=1000$ 这种超长步数下，DDPM 其实略微好一点点点（因为随机性有助于补全细节纹理）。但性价比极低。
    *   **加速效果**：见 Figure 4，原来要跑 20 小时的任务，现在只要跑不到 1 小时。

*   **对你的启示**：
    你在做攻击实验时，**不要设 1000 步**。直接引用这里的结论，把 `timesteps` 设为 50 或 100。这是业界的 Standard Practice。

---

### 2. 样本一致性 (Sample Consistency in DDIMs)
**(对应 5.2 节，Figure 5)**

这是 DDIM 最神奇的特性之一，也是**对抗攻击最喜欢的一点**。

*   **实验设计**：
    *   固定初始随机噪声 $x_T$ 不变。
    *   分别用 10步、20步、50步、1000步 去采样生成图片。
*   **观察到的现象**：
    *   见 Figure 5。无论步数怎么变，生成的图片**语义几乎一模一样**（都是同一个人，同一个姿势，同一个背景）。变化的只是一些光影细节和清晰度。
*   **结论**：
    *   这意味着 $x_T$ 确实充当了类似 GAN 中 Latent Code ($z$) 的角色。它决定了图片的内容。
    *   而在 DDPM 中，同一个 $x_T$ 跑两次可能生成出完全不同的两张脸。

*   **对你的启示**：
    因为这种一致性，你在攻击时可以针对少量步数（比如 20 步）生成的图片 $x_0^{20}$ 计算梯度，这个梯度方向往往对 100 步生成的图片 $x_0^{100}$ 也是有效的。这叫 **Transferability across steps**。

---

### 3. 插值特性 (Interpolation)
**(对应 5.3 节，Figure 6)**

*   **目的**：证明 $x_T$ 的空间是连续平滑的，而不是坑坑洼洼的。
*   **实验设计**：
    *   选两张图对应的噪声 $x_T^{(A)}$ 和 $x_T^{(B)}$。
    *   在它们中间做球面线性插值 (Slerp)：$x_T^{(\alpha)} = \cos(\theta) x_T^{(A)} + \sin(\theta) x_T^{(B)}$。
    *   把这些插值出来的噪声生成为图片。
*   **现象**：
    *   图片从 A 平滑地渐变到了 B（比如发色渐变、表情渐变）。
*   **对你的启示**：
    **对抗攻击要在连续空间里才好使**。如果是离散或者不连续的，梯度下降法（Gradient Descent）就会卡住。DDIM 的插值实验证明了这个 Latent Space 适合用 PGD 这种基于梯度的优化算法来搜索对抗样本。

---

### 4. 重构/编解码能力 (Reconstruction from Latent Space)
**(对应 5.4 节，Table 2)**

这对做 **防御 (Defense)** 研究至关重要。

*   **实验设计**：
    *   拿一张真实图片 $x_0$。
    *   **Encode**：用 ODE 逆过程（或者近似的倒推公式）把它推回 $x_T$。
    *   **Decode**：再用 DDIM 采样公式推回 $\hat{x}_0$。
    *   算一下 $x_0$ 和 $\hat{x}_0$ 的误差（MSE）。
*   **结论**：
    *   误差非常非常小（Table 2）。
    *   这意味着 DDIM 几乎是一个**完美的可逆映射**。你把它变成噪声再变回来，信息基本不丢。

*   **对你的启示 - 防御思路**：
    如果有人攻击了图片 $x_{adv} = x_0 + \delta$，你可以通过 Encode $\to$ Decode 的过程来“清洗”它。
    因为对抗噪声 $\delta$ 通常分布很奇怪，在 Encode 到高维高斯分布再 Decode 回来的过程中，这种奇怪的分布往往会被模型“忽略”或“平滑”掉，从而还原出干净的图片。这就是 DiffPure 的核心思想。

---

### 5. 总结实验部分

这章实验告诉你：
1.  **快**：你可以设置少步数来跑攻击。
2.  **稳**：同一个 $x_T$ 对应同一张图，方便你定向攻击。
3.  **顺**：Latent Space 平滑，方便梯度下降搜索。
4.  **逆**：支持 Encoder-Decoder 结构，提供了防御思路。

对于一篇大二学生要做的科研，你首先要做的就是**复现 Table 1 或 Figure 4 的实验**，跑通 DDIM 的 50 步采样，这是你一切后续工作的基础。