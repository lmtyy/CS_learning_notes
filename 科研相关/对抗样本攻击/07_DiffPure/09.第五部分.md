**Section 5 (Experiments)** 是论文的“实锤”部分。所有的方法设计、数学推导，最终都要靠这里的表格和曲线来证明“我真的比别人强”。

这也是你 **复现工作的指南针**。如果你要复现 DiffPure，你的目标就是跑出和这一节类似的表格或曲线。

我把这部分拆解为 **设置、战果、消融实验** 三块来讲。

---

### 第一块：实验设置 (Settings) —— 怎么跑的？(5.1)

1.  **数据集**：三大件 —— **CIFAR-10** (小图), **ImageNet** (大图), **CelebA-HQ** (人脸)。
    *   *建议*：你复现只跑 CIFAR-10 就够了，快且资源消耗少。

2.  **分类器**：ResNet, WideResNet (WRN), ViT。
    *   *亮点*：DiffPure 证明了我不挑食，什么分类器我都能保护。

3.  **攻击手段 (Attacks)**：
    *   **AutoAttack (AA)**: 即使放到现在也是公认的**最强攻击集合**（包含了 $L_\infty$ 和 $L_2$）。能防住 AA 才是真本事。
    *   **BPDA+EOT**: 专门针对净化类防御（Gradient Masking）的克星。EOT (Expectation Over Time) 是为了应对 DiffPure 的随机性。
    *   **StAdv**: 空间变换攻击（不仅仅是像素微扰），用来测试泛化性。

---

### 第二块：核心战果 (Results) —— 我们有多强？(5.2 - 5.4)

请一定要对照论文的 **Table 1** 和 **Table 2**。

#### 1. 对比 SOTA 对抗训练 (vs. Adversarial Training)
*   **Table 1 (CIFAR-10 $L_\infty$)**:
    *   DiffPure 的 Robust Accuracy (鲁棒精度) 达到了 **70.64%**。
    *   当时最好的 AT（Rebuffi et al.）只有 60% 左右（不额外加数据的情况下）。
    *   **结论**：DiffPure 碾压了传统 AT。
*   **Table 3 (ImageNet)**:
    *   ImageNet 上我也比别人强。特别是在 ViT 上提升巨大（+7.68%）。

#### 2. 对比其他净化方法 (vs. Purification)
*   **Table 5**:
    *   对比旧的 Defense-GAN, EBM Defense。
    *   **结论**：DiffPure 的鲁棒精度高出了一大截（比如 +11%）。这证明了 Diffusion 确实是更好的净化器。

#### 3. 未见过的攻击 (Unseen Threats)
*   **Table 4**: 这是 DiffPure 最大的卖点。
    *   AT 在 $L_\infty$ 上训练，遇到 $L_2$ 或 StAdv 就崩了。
    *   DiffPure 没训练过任何特定的攻击，但对 $L_\infty, L_2, \text{StAdv}$ 全都能防住。
    *   **结论**：DiffPure 才是真正的通用防御。

---

### 第三块：消融实验 (Ablation Studies) —— 为什么好？(5.5)

这部分是你产生 **Idea** 和**理解核心机制** 的关键，特别是 **Figure 3**。

#### 1. 扩散时间步 $t^*$ 的影响 (Impact of timestep $t^*$)
*   **Figure 3 (必须复现的图)**：
    *   横轴是 $t^*$，纵轴是 Accuracy。
    *   **Standard Acc (虚线)**：随着 $t^*$ 变大，精度单调**下降**。
        *   *原因*：你把图洗得太厉害了，原图的信息（语义）丢了。
    *   **Robust Acc (实线)**：呈现 **倒U型 (先升后降)**。
        *   一开始上升：因为攻击被洗掉了。
        *   后面下降：因为连语义都被洗掉了。
    *   **Sweet Spot**: 我们可以看到最佳点大概在 $t^*=0.1$ 到 $0.15$ 之间。

#### 2. 采样策略的影响 (Sampling Strategy)
*   Table 6 对比了三种去噪方式：
    *   **LD-SDE**: 以前的方法（只用 Langevin Dynamics）。
    *   **VP-ODE**: 把 SDE 变成确定性的 ODE 求解。
    *   **==VP-SDE (Ours)==**: 随机微分方程。
*   **发现**：SDE 最好。
    *   *原因*：SDE 引入了**随机性 (Stochasticity)**。随机性对于防御攻击非常重要（让攻击者很难对准靶心）。单纯的 ODE 虽然确定性高，但容易被攻击。

#### 3. 强强联手 (Combination)
*   **Figure 4**: 如果把 DiffPure 加在已经做过 AT 的模型前面会怎样？
*   **结论**：效果更强了！这说明 DiffPure 和 AT 是互补的。

---

### 对你的复现建议 (Actionable Items)

你不需要复现上面所有的表，只需要抓住最核心的一个点：

**复现目标**：
在 CIFAR-10 上，使用 WideResNet-28-10 分类器，复现 **Figure 3** 的那一根 **Robust Acc 曲线**。

**步骤**：
1.  选取 $t^* = [0.05, 0.1, 0.15, 0.2]$ 这四个点。
2.  用 PGD-10 或 AutoAttack (如果跑不动就 PGD) 攻击这四个设定下的 DiffPure。
3.  画出鲁棒精度曲线，看是不是“先升后降”。

如果你能拿着这张你自己画的图去找导师，说：“我复现了 DiffPure 的核心 Trade-off 现象，确认了 $t^*$ 在 0.1 左右效果最好”，这将是一个非常有说服力的开场。

**Bonus**: 顺便测一下时间（Table 14），你会发现它真的很慢。这就是你可以跟导师提的改进点——加速！